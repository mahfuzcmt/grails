/*
  (c) 2011 - 2013 Stefan Gabos
  @license    http://www.gnu.org/licenses/lgpl-3.0.txt GNU LESSER GENERAL PUBLIC LICENSE
  @package    Zebra_DatePicker
 jQuery Form Plugin
 version: 3.45.0-2013.10.17
 Requires jQuery v1.5 or later
 Copyright (c) 2013 M. Alsup
 Examples and documentation at: http://malsup.com/jquery/form/
 Project repository: https://github.com/malsup/form
 Dual licensed under the MIT and GPL licenses.
 https://github.com/malsup/form#copyright-and-license
 jQuery Mousewheel 3.1.13

 Copyright 2015 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,e){a!=Array.prototype&&a!=Object.prototype&&(a[c]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,e=[];!(c=a.next()).done;)e.push(c.value);return e};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.findInternal=function(a,c,e){a instanceof String&&(a=String(a));for(var b=a.length,g=0;g<b;g++){var d=a[g];if(c.call(e,d,g,a))return{i:g,v:d}}return{i:-1,v:void 0}};$jscomp.polyfill=function(a,c,e,b){if(c){e=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var g=a[b];g in e||(e[g]={});e=e[g]}a=a[a.length-1];b=e[a];c=c(b);c!=b&&null!=c&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6","es3");$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,b={next:function(){if(e<a.length){var g=e++;return{value:c(g,a[g]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,e){return[a,e]})}},"es6","es3");
(function(){var a=0;window.WCUIWidget=function(){};WCUIWidget.prototype={_createWidget:function(c,e){this.element=$(e);this.uuid=a++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();this.options=$.extend({},this.options,this._getCreateOptions(),c);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();
this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(a,e){var b=a,g;if(0===arguments.length)return $.widget.extend({},
this.options);if("string"===typeof a){b={};var d=a.split(".");a=d.shift();if(d.length){var f=b[a]=$.widget.extend({},this.options[a]);for(g=0;g<d.length-1;g++)f[d[g]]=f[d[g]]||{},f=f[d[g]];a=d.pop();if(1===arguments.length)return void 0===f[a]?null:f[a];f[a]=e}else{if(1===arguments.length)return void 0===this.options[a]?null:this.options[a];b[a]=e}}this._setOptions(b);return this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c]);return this},_setOption:function(a,e){this.options[a]=
e;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(a,e,b){var g,d=this;"boolean"!==typeof a&&(b=e,e=a,a=!1);b?(e=g=$(e),this.bindings=this.bindings.add(e)):(b=e,e=this.element,g=this.widget());$.each(b,function(b,h){function f(){if(a||
!0!==d.options.disabled&&!$(this).hasClass("ui-state-disabled"))return("string"===typeof h?d[h]:h).apply(d,arguments)}"string"!==typeof h&&(f.guid=h.guid=h.guid||f.guid||$.guid++);var c=b.match(/^([\w:-]*)\s*(.*)$/);b=c[1]+d.eventNamespace;(c=c[2])?g.delegate(c,b,f):e.bind(b,f)})},_off:function(a,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(e).undelegate(e);this.bindings=$(this.bindings.not(a).get());this.focusable=$(this.focusable.not(a).get());this.hoverable=
$(this.hoverable.not(a).get())},_delay:function(a,e){var b=this;return setTimeout(function(){return("string"===typeof a?b[a]:a).apply(b,arguments)},e||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){$(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){$(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){$(a.currentTarget).addClass("ui-state-focus")},
focusout:function(a){$(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,e,b){var g,d=this.options[a];b=b||{};e=$.Event(e);e.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();e.target=this.element[0];if(a=e.originalEvent)for(g in a)g in e||(e[g]=a[g]);this.element.trigger(e,b);return!($.isFunction(d)&&!1===d.apply(this.element[0],[e].concat(b))||e.isDefaultPrevented())}}})();
(function(){var a={active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,disabled:[],load_on_activate:!1,all_deactivable:!1,ajax_caller:bm.ajax,loader_template:"",content_on_load_error:"",beforeActivate:null,beforeLoad:null,load:null,loadError:null,hashnavigation:!1},c=0,e=function(b,g){g=this.options=$.extend({},a,g);this.running=!1;this.element=b;this.bindings=$();this.hoverable=$();this.focusable=$();this._handlers={};this.eventNamespace="tabs-"+c++;this.element.toggleClass("bmui-tab-collapsible",
g.collapsible).delegate(".bmui-tab-header","focus."+this.eventNamespace,function(){$(this).closest(".bmui-tab-header").is(".bmui-state-disabled")&&this.blur()});this._processTabs();g.disabled=$.unique(g.disabled.concat($.map(this.tabs.filter("[data-tabify-disabled], .bmui-state-disabled"),function(a){return a.index})));g.active=this._initialActive();this.active=this.options.active?this._findTab(g.active):$();this._refresh();this.active.length&&this._load(g.active);var d=this;if(this.options.hashnavigation)$(window).on("hashchange",
function(){var a=window.location.hash;if(a&&(a=a.substring(1),!0!==d.options.disabled)){if(d.options.disabled&&d.options.disabled.contains(a)){var b=d.getTabIndex(a)-1;for(a=void 0;0<=b;b--){var g=d.tabs.eq(b)[0].index;if(!d.options.disabled.contains(g)){a=g;break}}a&&(b=bm.path(location),b.fragment=a,history.pushState("tabify","expected tab disabled",b.full))}else d._getTab(a).length||(a=void 0);a&&d.activate(a)}})};e.prototype={activate:function(a,g){(a=this._findTab(a))&&a[0]!==this.active[0]&&
(a.length||(a=this.active),this._eventHandler({target:a,currentTarget:a,preventDefault:$.noop,silent:g}))},add:function(a){if(a.template instanceof $){var b=a.template;var d=this.tabs.index(b)}else b=$(a.template||'<div> \r\n                    <span class="icon"></span>   \r\n                    <span class="title"></span> \r\n                    <span class="close"></span>   \r\n                </div>'),a.title&&b.find(".title").text(a.title),a.tip&&b.attr("title",a.tip),a.close_on_header||b.find(".close").remove(),
a.icon_on_header||b.find(".icon").remove(),b.addClass("bmui-tab-header "+(a.clazz||"")),a.load_url&&b.attr("data-tabify-url",a.load_url),a.index||(a.index=(new Date).getTime()),b.attr("data-tabify-tab-id",a.index),a.after?(d=this._findTab(a.after))&&d.length?(d.after(b),d=this.tabs.index(d)+1):(this.headercontainer.append(b),d=this.tabs.length):a.before?(d=this._findTab(a.before))&&d.length?(d.before(b),d=this.tabs.index(d)):(this.headercontainer.prepend(b),d=0):(this.headercontainer.append(b),d=
this.tabs.length-1);a.panel&&a.panel.length?(a.panel.addClass("bmui-tab-panel"),b[0].panel=a.panel,a.panel.parent().length||this.panelcontainer.append(b[0].panel)):(b[0].panel=$("<div class='bmui-tab-panel' id='bmui-tab-"+a.index+"'></div>"),this.panelcontainer.append(b[0].panel));Array.prototype.splice.call(this.tabs,d,0,b[0]);this._processTab(b[0]);this._refresh();a.active&&this._setOption("active",b[0].index);return{tab:b,panel:b[0].panel,index:b[0].index}},destroy:function(){this._destroy();this.element.unbind("."+
this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind("."+this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled bmui-state-disabled");this.bindings.unbind("."+this.eventNamespace);this.hoverable.removeClass("bmui-state-hover");this.focusable.removeClass("bmui-state-focus")},disable:function(a){if(a)!0===this.options.disabled&&(this.options.disabled=[]),this.tabs.filter("[data-tabify-tab-id='"+a+
"']").length&&!this.options.disabled.contains(a)&&(this.options.disabled.push(a),this._setupDisabled());else return this._setOptions({disabled:!0})},each:function(a){this.tabs.each(function(b,d){a.call({tab:$(d),panel:d.panel,index:d.index},b)});return this},enable:function(a){if(a)!1!==this.options.disabled&&this.tabs.filter("[data-tabify-tab-id='"+a+"']").length&&this.options.disabled.contains(a)&&(this.options.disabled.remove(a),this._setupDisabled());else return this._setOptions({disabled:!1})},
getActive:function(){return this.active?this.active.attr("data-tabify-tab-id"):null},getTabHash:function(a){return{tab:this.tabs.filter("[data-tabify-tab-id='"+a+"']"),panel:this.element.find(this._sanitizeSelector("#bmui-tab-"+a))}},getTabIndex:function(a){return this._getTabIndex(this._getTab(a))},hasIndex:function(a){return(a=this._findTab(a))&&a.length},isContentLoaded:function(a){return!this._findTab(a).nat.load_url},option:function(a,g){var b=a,f;if("string"===typeof a){b={};var h=a.split(".");
a=h.shift();if(h.length){var c=b[a]=$.extend({},this.options[a]);for(f=0;f<h.length-1;f++)c[h[f]]=c[h[f]]||{},c=c[h[f]];a=h.pop();if(1===arguments.length)return void 0===c[a]?null:c[a];c[a]=g}else{if(1===arguments.length)return void 0===this.options[a]?null:this.options[a];b[a]=g}}this._setOptions(b)},remove:function(a){if((a=this._findTab(a))&&a.length){var b=this._getPanelForTab(a),d=this.tabs.index(a),f=this.panels.index(b);Array.prototype.splice.call(this.tabs,d,1);Array.prototype.splice.call(this.panels,
f,1);this.options.all_deactivable||this.active[0]!=a[0]||(f=this.tabs.eq(d),f.length||(f=this.tabs.eq(d-1)),f.length&&this._setOption("active",f[0].index));a.add(b).remove()}},refresh:function(){var a=this.options;a.disabled=$.map(this.tabs.filter(".bmui-state-disabled"),function(a){return a.index});this._processTabs();!1!==a.active&&this.tabs.length?this.active.length&&!$.contains(this.tabs[0],this.active[0])?this.tabs.length===a.disabled.length?(a.active=!1,this.active=$()):this.activate(this._findNextTab(this.tabs.index(a.active)-
1,!1)):a.active=-1<this.tabs.index(this.active)?this.active:null:(a.active=!1,this.active=$());this._refresh()},reload:function(a,g){a=this._findTab(a);a.addClass("reloading");a[0].load_url=g||a.attr("data-tabify-url");this.active[0]==a[0]&&this._eventHandler({target:a,currentTarget:a,preventDefault:$.noop})},_ajaxSettings:function(a,g,d){var b=this;return{url:a.load_url,dataType:"html",beforeSend:function(a,f){return bm.trigger(b,b.element,"tab","beforeLoadRequestSend",[$.extend({jqXHR:a,ajaxSettings:f},
d)])}}},_findNextTab:function(a,g){function b(){a>f&&(a=0);0>a&&(a=f);return a}for(var f=this.tabs.length-1;-1!==$.inArray(b(),this.options.disabled);)a=g?a+1:a-1;return a},_createPanel:function(a){return $("<div>").attr("id","bmui-tab-"+a).addClass("bmui-tab-panel").data("bmui-tab-destroy",!0)},_delay:function(a,g){var b=this;return setTimeout(function(){return("string"===typeof a?b[a]:a).apply(b,arguments)},g||0)},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("bmui-tab bmui-tab-collapsible");
this.headercontainer.removeClass("bmui-tab-header-container").removeAttr("role");this.tabs.add(this.panels).each(function(){$.data(this,"bmui-tab-destroy")?$(this).remove():$(this).removeClass("bmui-state-default bmui-state-active bmui-state-disabled bmui-corner-top bmui-corner-bottom bmui-widget-content bmui-tab-active bmui-tab-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});
this.tabs.each(function(){var a=$(this),g=a.data("bmui-tab-aria-controls");g?a.attr("aria-controls",g).removeData("bmui-tab-aria-controls"):a.removeAttr("aria-controls")});this.panels.removeClass("bmui-state-visible");"content"!==this.options.heightStyle&&this.panels.css("height","")},_focusable:function(a){this.focusable=this.focusable.add(a);a.on("focusin."+this.eventNamespace,function(a){$(a.currentTarget).addClass("bmui-state-focus")});a.on("focusout."+this.eventNamespace,function(a){$(a.currentTarget).removeClass("bmui-state-focus")})},
_focusNextTab:function(a,g){a=this._findNextTab(a,g);this.tabs.eq(a).focus();return a},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):$()}},_getHederContainer:function(){var a=this.options.header_container?this.options.header_container instanceof $?this.options.header_container:this.element.find(this.options.header_container):this.element.find("> .bmui-tab-header-container");a.length||(a=this.element);return a},_getPanelContainer:function(){return this.options.bodies_container?
this.options.bodies_container instanceof $?this.options.bodies_container:this.element.find(this.options.bodies_container):this.element.find("> .bmui-tab-body-container")},_getPanelForTab:function(a){if(!a||!a.length)return null;if(a[0].panel)return a[0].panel;a=a.attr("data-aria-controls");return this.panelcontainer.find("> "+this._sanitizeSelector("#bmui-tab-"+a))},_getTab:function(a){return this.tabs.filter("[data-tabify-tab-id='"+a+"']")},_getTabIndex:function(a){return a.length?this.tabs.index(a):
-1},_handlePageNav:function(a){if(a.altKey&&a.keyCode===browser.key.PAGE_UP)return this.activate(this._focusNextTab(this.tabs.index(this.active)-1,!1)),!0;if(a.altKey&&a.keyCode===browser.key.PAGE_DOWN)return this.activate(this._focusNextTab(this.tabs.index(this.active)+1,!0)),!0},_hoverable:function(a){this.hoverable=this.hoverable.add(a);a.on("mouseenter."+this.eventNamespace,function(a){$(a.currentTarget).addClass("bmui-state-hover")});a.on("mouseleave."+this.eventNamespace,function(a){$(a.currentTarget).removeClass("bmui-state-hover")})},
_eventHandler:function(a){var b=this.options,d=this.active,f=$(a.currentTarget),h=f.closest(".bmui-tab-header"),c=h[0]===d[0],e=c&&b.collapsible,r=e?$():this._getPanelForTab(h),n=d.length?this._getPanelForTab(d):$();d={oldIndex:d.length?d[0].index:-1,oldTab:d,oldPanel:n,newIndex:e?"":h[0].index,newTab:e?$():h,newPanel:r};if(a.silent||!(h.hasClass("bmui-state-disabled")||h.hasClass("bmui-tab-loading")||this.running||c&&!b.collapsible&&!f.hasClass("reloading")||!1===bm.trigger(this,this.element,"tab",
"beforeActivate",[d])))b.active=e?!1:h[0].index,this.active=c&&!f.hasClass("reloading")?$():h,f.removeClass("reloading"),this.xhr&&this.xhr.abort(),n.length||r.length||$.error("jQuery UI Tabs: Mismatching fragment identifier."),r.length&&this._load(h,a),this._toggle(a,d)},_findTab:function(a){if("number"==typeof a)return this.tabs.eq(a);if("string"===typeof a||a instanceof String)return this.tabs.filter("[data-tabify-tab-id='"+a+"']");if(a instanceof $){var b=a.closest(".bmui-tab-header",this.element);
b=b.length?b:a.closest(".bmui-tab-panel",this.element);if(b.length){var d;this.tabs.each(function(){if(b[0]==this||b[0]==this.panel[0])return d=$(this),!1});if(d)return d}}return a||null},_initialActive:function(){var a=this.options.active,g=location.hash.substring(1);if(!a&&g)if(this.options.disabled.contains(g))for(var d=this.getTabIndex(g)-1;0<=d;d--){var f=this.tabs.eq(d)[0].index;if(!this.options.disabled.contains(f)){a=f;d=bm.path(location);d.fragment=a;history.pushState("tabify","expected tab disabled",
d.full);break}}else this.tabs.each(function(b,d){if($(d).attr("aria-controls")===g)return a=d.index,!1});a||(d=this.tabs.filter(".bmui-tab-active"),d.length&&(a=d[0].index));a||(a=this.tabs.length?this.tabs[0].index:null);return a},_load:function(a,g){var b=this,f=this._findTab(a),h=this._getPanelForTab(f),c={index:f[0].index,tab:f,panel:h};if(f[0].load_url){this.options.loader_template&&h.append(this.options.loader_template);var e=this._ajaxSettings(f[0],g,c);bm.trigger(b,b.element,"tab","beforeLoad",
[$.extend(e,c)]);(this.xhr=this.options.ajax_caller(e))&&"canceled"!==this.xhr.statusText&&(f.addClass("bmui-tab-loading"),h.addClass("bmui-tab-loading"),h.attr("aria-busy","true"),this.xhr.always(function(){setTimeout(function(){"abort"===status&&b.panels.stop(!1,!0);f.addClass("bmui-tab-loading-error");f.removeClass("bmui-tab-loading");h.removeClass("bmui-tab-loading");h.removeAttr("aria-busy")},1)}).done(function(a){setTimeout(function(){h.html(a).updateUi();bm.handleUrlNavigation(e.url,h);bm.trigger(b,
b.element,"tab","load",[c]);b.options.load_on_activate||(f[0].load_url=null)},1)}).fail(function(a,d,f){setTimeout(function(){h.html(b.options.content_on_load_error||(app.production?"":f));bm.trigger(b,b.element,"tab","error",[c])},1)}).always(function(a){setTimeout(function(){a===b.xhr&&delete b.xhr},1)}))}},_panelKeydown:function(a){this._handlePageNav(a)||a.ctrlKey&&a.keyCode===browser.key.UP&&this.active.focus()},_processTab:function(a){var b,d,f=$(a).attr("id"),h=$(a).attr("aria-controls");a.load_url=
$(a).attr("data-tabify-url");a.index=b=$(a).attr("data-tabify-tab-id");a.index||(a.index=b="index-"+bm.getUUID(),$(a).attr("data-tabify-tab-id",b));a.panel=d=a.panel||this.panelcontainer.find("> #bmui-tab-"+b);d.length||(d=this._createPanel(b),d.appendTo(this.panelcontainer),d.attr("aria-live","polite"),a.panel=d);this.panels=this.panels.add(d);a=$(a);h&&a.data("bmui-tab-aria-controls",h);a.attr({"aria-controls":b,"aria-labelledby":f});d.attr("aria-labelledby",f)},_processTabs:function(){var a=this;
this.headercontainer=this._getHederContainer().attr("role","tablist");this.panelcontainer=this._getPanelContainer();this.tabs=this.headercontainer.find("> .bmui-tab-header-group > .bmui-tab-group-headers > .bmui-tab-header, > .bmui-tab-header").addClass("bmui-state-default").attr({role:"tab",tabIndex:-1});this.panels=$();this.tabs.each(function(b,d){a._processTab(d)});this.panels.addClass("bmui-tab-panel").attr("role","tabpanel")},_refresh:function(){this._setupDisabled();this._setupEvents(this.options.event);
this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).removeClass("bmui-state-visible").attr({"aria-expanded":"false","aria-hidden":"true"});if(this.active.length){this.active.addClass("bmui-tab-active bmui-state-active").attr({"aria-selected":"true",tabIndex:0});if(this.options.hashnavigation&&location.hash!="#"+this.active[0].index){var a=bm.path(location);a.fragment=this.active[0].index;
history.pushState("tabify",a.fragment+"tab activated",a.full)}this._getPanelForTab(this.active).addClass("bmui-state-visible").attr({"aria-expanded":"true","aria-hidden":"false"})}else this.tabs.eq(0).attr("tabIndex",0)},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},_setOption:function(a,g){this.options[a]=g;"disabled"===a&&this._setupDisabled();if("active"===a)this.activate(g);else if("disabled"===a)this._setupDisabled(g);else return"collapsible"===
a&&(this.element.toggleClass("bmui-tab-collapsible",g),g||!1!==this.options.active||this.activate(0)),"event"===a&&this._setupEvents(g),"heightStyle"===a&&this._setupHeightStyle(g),this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setupDisabled:function(a){a="undefined"==typeof a?this.options.disabled:a;var b=$(),d=$();!0===a?b=this.tabs:!1===a?d=this.tabs:this.tabs.each(function(f){-1<$.inArray(this.index,a)||-1<$.inArray(f,a)?b=b.add($(this)):d=d.add($(this))});
b.addClass("bmui-state-disabled").attr("aria-disabled","true");d.removeClass("bmui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b.length?b.length==this.tabs.length?!0:a:!1},_setupEvents:function(a){var b=this,d={keydown:$.proxy(this._tabKeydown,this)};a&&$.each(a.split(" "),function(a,h){d[h]=$.proxy(b._eventHandler,b)});$.extend(this._handlers,d);this.tabs.add(this.panels).off("."+this.eventNamespace);this.tabs.find(".close").off("."+this.eventNamespace).on("click."+this.eventNamespace,
function(){var a=$(this).closest(".bmui-tab-header"),d=b._getPanelForTab(a),c=a[0].index;!1!==bm.trigger(b,b.element,"tab","beforeRemove",[{tab:a,panel:d,index:c}])&&(b.remove(c),bm.trigger(b,b.element,"tab","remove",[{tab:a,panel:d,index:c}]))});this.panels.on("keydown."+this.eventNamespace,$.proxy(this._panelKeydown,this));this._setupTabEvents(this.tabs)},_setupHeightStyle:function(a){var b=this.element.parent();if("fill"===a){var d=b.height();d-=this.element.outerHeight()-this.element.height();
this.element.siblings(":visible").each(function(){var a=$(this),b=a.css("position");"absolute"!==b&&"fixed"!==b&&(d-=a.outerHeight(!0))});this.element.children().not(this.panels).each(function(){d-=$(this).outerHeight(!0)});this.panels.each(function(){$(this).height(Math.max(0,d-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")}else"auto"===a&&(d=0,this.panels.each(function(){d=Math.max(d,$(this).height("").height())}).height(d))},_setupTabEvents:function(a){var b=this;$.each(this._handlers,
function(d,f){a.on(d+"."+b.eventNamespace,$.proxy(f,b))});this._focusable(a);this._hoverable(a)},_tabKeydown:function(a){var b=$(this[0].document.activeElement).closest(".bmui-tab-header"),d=this.tabs.index(b),f=!0;if(!this._handlePageNav(a)){switch(a.keyCode){case browser.key.RIGHT:case browser.key.DOWN:d++;break;case browser.key.UP:case browser.key.LEFT:f=!1;d--;break;case browser.key.END:d=this.tabs.length-1;break;case browser.key.HOME:d=0;break;case browser.key.SPACE:a.preventDefault();clearTimeout(this.activating);
this.activate(d);return;case browser.key.ENTER:a.preventDefault();clearTimeout(this.activating);this.activate(d===this.tabs.index(this.active)?!1:d);return;default:return}clearTimeout(this.activating);d=this._focusNextTab(d,f);if(!a.ctrlKey){b.attr("aria-selected","false");var h=this.tabs.eq(d).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",h[0].index)},this.delay)}}},_toggle:function(a,c){var b=c.newPanel,f=c.oldPanel;this.running=!0;c.oldTab.closest(".bmui-tab-header").removeClass("bmui-tab-active bmui-state-active");
f.removeClass("bmui-state-visible");c.newTab.closest(".bmui-tab-header").addClass("bmui-tab-active bmui-state-active");if(this.options.hashnavigation&&location.hash!="#"+c.newTab[0].index){var h=bm.path(location);h.fragment=c.newTab[0].index;history.pushState("tabify",h.fragment+"tab activated",h.full)}b.addClass("bmui-state-visible");this.running=!1;a.silent||bm.trigger(this,this.element,"tab","activate",[c]);f.attr({"aria-expanded":"false","aria-hidden":"true"});c.oldTab.attr("aria-selected","false");
b.length&&f.length?c.oldTab.attr("tabIndex",-1):b.length&&this.tabs.filter(function(){return 0===$(this).attr("tabIndex")}).attr("tabIndex",-1);b.attr({"aria-expanded":"true","aria-hidden":"false"});c.newTab.attr({"aria-selected":"true",tabIndex:0})}};bm.jquerify("tabify",e)})();
bm.ui_updaters&&bm.ui_updaters.push(function(){this.find(".bmui-tab").tabify({loader_template:'<div class="mask-overlay"><span class="loader"></span></div>'}).on("tab:beforeLoad",function(a,c){c.panel.addClass("masked-div")}).on("tab:load tab:error",function(a,c){c.panel.removeClass("masked-div")})});
(function(a){function c(b){var d=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(b.target).ajaxSubmit(d))}function e(b){var d=b.target,h=a(d);if(!h.is("[type=submit],[type=image]")){d=h.closest("[type=submit]");if(0===d.length)return;d=d[0]}var f=this;f.clk=d;"image"==d.type&&(void 0!==b.offsetX?(f.clk_x=b.offsetX,f.clk_y=b.offsetY):"function"==typeof a.fn.offset?(h=h.offset(),f.clk_x=b.pageX-h.left,f.clk_y=b.pageY-h.top):(f.clk_x=b.pageX-d.offsetLeft,f.clk_y=b.pageY-d.offsetTop));setTimeout(function(){f.clk=
f.clk_x=f.clk_y=null},100)}function b(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var g=void 0!==a("<input type='file'/>").get(0).files;var d=void 0!==window.FormData;var f=!!a.fn.prop;a.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"===typeof a?a:
this.attr.apply(this,arguments)};a.fn.ajaxSubmit=function(h){function c(b){b=a.param(b,h.traditional).split("&");var d=b.length,f=[],c;for(c=0;c<d;c++){b[c]=b[c].replace(/\+/g," ");var e=b[c].split("=");f.push([decodeURIComponent(e[0]),decodeURIComponent(e[1])])}return f}function e(b){for(var d=new FormData,f=0;f<b.length;f++)d.append(b[f].name,b[f].value);if(h.extraData)for(b=c(h.extraData),f=0;f<b.length;f++)b[f]&&d.append(b[f][0],b[f][1]);h.data=null;f=a.extend(!0,{},a.ajaxSettings,h,{contentType:!1,
processData:!1,cache:!1,type:w||"POST"});h.uploadProgress&&(f.xhr=function(){var b=a.ajaxSettings.xhr();b.upload&&b.upload.addEventListener("progress",function(a){var b=0,d=a.loaded||a.position,f=a.total;a.lengthComputable&&(b=Math.ceil(d/f*100));h.uploadProgress(a,d,f,b)},!1);return b});f.data=null;var e=f.beforeSend;f.beforeSend=function(a,b){b.data=h.formData?h.formData:d;e&&e.call(this,a,b)};return f.ajax_caller(f)}function r(d,c,e){function g(a){var d=null;try{a.contentWindow&&(d=a.contentWindow.document)}catch(ba){b("cannot get iframe.contentWindow document: "+
ba)}if(d)return d;try{d=a.contentDocument?a.contentDocument:a.document}catch(ba){b("cannot get iframe.contentDocument: "+ba),d=a.document}return d}function m(){function d(){try{var a=g(E).readyState;b("state = "+a);a&&"uninitialized"==a.toLowerCase()&&setTimeout(d,50)}catch(ja){b("Server abort: ",ja," (",ja.name,")"),p(2),y&&clearTimeout(y),y=void 0}}var f=n.attr2("target"),h=n.attr2("action");l.setAttribute("target",N);w&&!/post/i.test(w)||l.setAttribute("method","POST");h!=t.url&&l.setAttribute("action",
t.url);t.skipEncodingOverride||w&&!/post/i.test(w)||n.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});t.timeout&&(y=setTimeout(function(){A=!0;p(1)},t.timeout));var c=[];try{if(t.extraData)for(var e in t.extraData)t.extraData.hasOwnProperty(e)&&(a.isPlainObject(t.extraData[e])&&t.extraData[e].hasOwnProperty("name")&&t.extraData[e].hasOwnProperty("value")?c.push(a('<input type="hidden" name="'+t.extraData[e].name+'">').val(t.extraData[e].value).appendTo(l)[0]):c.push(a('<input type="hidden" name="'+
e+'">').val(t.extraData[e]).appendTo(l)[0]));"json"==(t.dataType||"html")&&c.push(a('<input type="hidden" name="jsonashtml">').val("true").appendTo(l)[0]);c.push(a('<input type="hidden" name="xhriniframe">').val("true").appendTo(l)[0]);t.iframeTarget||L.appendTo("body");E.attachEvent?E.attachEvent("onload",p):E.addEventListener("load",p,!1);setTimeout(d,15);try{l.submit()}catch(wa){document.createElement("form").submit.apply(l)}}finally{l.setAttribute("action",h),f?l.setAttribute("target",f):n.removeAttr("target"),
a(c).remove()}}function p(d){if(!x.aborted&&!la)if(D=g(E),D||(b("cannot access response document"),d=2),1===d&&x)x.abort("timeout"),z.reject(x,"timeout");else if(2==d&&x)x.abort("server abort"),z.reject(x,"error","server abort");else if(D&&D.location.href!=t.iframeSrc||A){E.detachEvent?E.detachEvent("onload",p):E.removeEventListener("load",p,!1);d="success";var f;try{if(A)throw"timeout";var h="xml"==t.dataType||D.XMLDocument||a.isXMLDoc(D);b("isXml="+h);if(!h&&window.opera&&(null===D.body||!D.body.innerHTML)&&
--T){b("requeing onLoad callback, DOM not available");setTimeout(p,250);return}var c=D.body?D.body:D.documentElement;x.responseText=c?c.innerHTML:null;x.responseXML=D.XMLDocument?D.XMLDocument:D;h&&(t.dataType="xml");x.getResponseHeader=function(a){return{"content-type":t.dataType}[a.toLowerCase()]};c&&(x.status=Number(c.getAttribute("status"))||x.status,x.statusText=c.getAttribute("statusText")||x.statusText);var e=(t.dataType||"html").toLowerCase(),m=/(json|script|text)/.test(e);if(m||t.textarea){var r=
D.getElementsByTagName("textarea")[0];if(r)x.responseText=r.value,x.status=Number(r.getAttribute("status"))||x.status,x.statusText=r.getAttribute("statusText")||x.statusText;else if(m){var l=D.getElementsByTagName("pre")[0],n=D.getElementsByTagName("body")[0];l?x.responseText=l.textContent?l.textContent:l.innerText:n&&(x.responseText=n.textContent?n.textContent:n.innerText)}}else"xml"==e&&!x.responseXML&&x.responseText&&(x.responseXML=k(x.responseText));try{V=sa(x,e,t)}catch(S){d="parsererror",x.error=
f=S||d}}catch(S){b("error caught: ",S),d="error",x.error=f=S||d}x.aborted&&(b("upload aborted"),d=null);x.status&&(d=200<=x.status&&300>x.status||304===x.status?"success":"error");"success"===d?(t.success&&t.success.call(t.context,V,"success",x),z.resolve(x.responseText,"success",x),u&&a.event.trigger("ajaxSuccess",[x,t])):d&&(void 0===f&&(f=x.statusText),t.error&&t.error.call(t.context,x,d,f),z.reject(x,"error",f),u&&a.event.trigger("ajaxError",[x,t,f]));u&&a.event.trigger("ajaxComplete",[x,t]);
u&&!--a.active&&a.event.trigger("ajaxStop");t.complete&&t.complete.call(t.context,x,d);la=!0;t.timeout&&clearTimeout(y);setTimeout(function(){t.iframeTarget?L.attr("src",t.iframeSrc):L.remove();x.responseXML=null},100)}}var l=n[0],q,u,A,y,z=a.Deferred();z.abort=function(a){x.abort(a)};if(d)for(q=0;q<v.length;q++){var B=a(v[q]);f?B.prop("disabled",!1):B.removeAttr("disabled")}if(c)var t=e;else h.on_login=function(){r(d,!0,t)},h=bm._modified_ajax_settings(h),t=a.extend(!0,{},a.ajaxSettings,h);t.context=
t.context||t;var N="jqFormIO"+(new Date).getTime();if(t.iframeTarget){var L=a(t.iframeTarget);(e=L.attr2("name"))?N=e:L.attr2("name",N)}else L=a('<iframe name="'+N+'" src="'+t.iframeSrc+'" />'),L.css({position:"absolute",top:"-1000px",left:"-1000px"});var E=L[0];var x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(d){var f="timeout"===d?"timeout":"aborted";b("aborting upload... "+
f);this.aborted=1;try{E.contentWindow.document.execCommand&&E.contentWindow.document.execCommand("Stop")}catch(ba){}L.attr("src",t.iframeSrc);x.error=f;t.error&&t.error.call(t.context,x,f,d);u&&a.event.trigger("ajaxError",[x,t,f]);t.complete&&t.complete.call(t.context,x,f)}};(u=t.global)&&0===a.active++&&a.event.trigger("ajaxStart");u&&a.event.trigger("ajaxSend",[x,t]);if(t.beforeSend&&!1===t.beforeSend.call(t.context,x,t))return t.global&&a.active--,z.reject(),z;if(x.aborted)return z.reject(),z;
(c=l.clk)&&(e=c.name)&&!c.disabled&&(t.extraData=t.extraData||{},t.extraData[e]=c.value,"image"==c.type&&(t.extraData[e+".x"]=l.clk_x,t.extraData[e+".y"]=l.clk_y));c=a("meta[name=csrf-token]").attr("content");(e=a("meta[name=csrf-param]").attr("content"))&&c&&(t.extraData=t.extraData||{},t.extraData[e]=c);t.forceSync?m():setTimeout(m,10);var V,D,T=50,la,k=a.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,
"text/xml");return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},C=a.parseJSON||function(a){return window.eval("("+a+")")},sa=function(b,d,f){var h=b.getResponseHeader("content-type")||"",c="xml"===d||!d&&0<=h.indexOf("xml");b=c?b.responseXML:b.responseText;c&&"parsererror"===b.documentElement.nodeName&&a.error&&a.error("parsererror");f&&f.dataFilter&&(b=f.dataFilter(b,d));"string"===typeof b&&("json"===d||!d&&0<=h.indexOf("json")?b=C(b):("script"===d||!d&&0<=h.indexOf("javascript"))&&
a.globalEval(b));return b};return z}if(!this.length)return b("ajaxSubmit: skipping submit process - no element selected"),this;var n=this;"function"==typeof h?h={success:h}:void 0===h&&(h={});var w=h.type||this.attr2("method");var z=h.url||this.attr2("action");(z=(z="string"===typeof z?a.trim(z):"")||window.location.href||"")&&(z=(z.match(/^([^#]+)/)||[])[1]);h=a.extend(!0,{url:z,success:a.ajaxSettings.success,type:w||a.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":
"about:blank",ajax_caller:bm.ajax},h);z={};this.trigger("form-pre-serialize",[this,h,z]);if(z.veto)return b("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(h.beforeSerialize&&!1===h.beforeSerialize(this,h))return b("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var A=h.traditional;void 0===A&&(A=a.ajaxSettings.traditional);var v=[],l=this.formToArray(h.semantic,v);if(h.data){h.extraData=h.data;var q=a.param(h.data,A)}if(h.beforeSubmit&&!1===h.beforeSubmit(l,this,
h))return b("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[l,this,h,z]);if(z.veto)return b("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;z=a.param(l,A);q&&(z=z?z+"&"+q:q);"GET"==h.type.toUpperCase()?(h.url+=(0<=h.url.indexOf("?")?"&":"?")+z,h.data=null):h.data=z;var y=[];h.resetForm&&y.push(function(){n.resetForm()});h.clearForm&&y.push(function(){n.clearForm(h.includeHidden)});if(!h.dataType&&h.target){var u=h.success||function(){};
y.push(function(b){var d=h.replaceTarget?"replaceWith":"html";a(h.target)[d](b).each(u,arguments)})}else h.success&&y.push(h.success);h.success=function(a,b,d){for(var f=h.context||this,c=0,e=y.length;c<e;c++)y[c].apply(f,[a,b,d||n,n])};if(h.error){var B=h.error;h.error=function(a,b,d){B.apply(h.context||this,[a,b,d,n])}}if(h.complete){var T=h.complete;h.complete=function(a,b){T.apply(h.context||this,[a,b,n])}}q=a("input[type=file]:enabled",this);q=q.filter(function(){return""!=this.value});q=0<q.length;
z="multipart/form-data"==n.attr("enctype")||"multipart/form-data"==n.attr("encoding");A=g&&d;b("fileAPI :"+A);var D;!1!==h.iframe&&(h.iframe||(q||z)&&!A)?h.closeKeepAlive?a.get(h.closeKeepAlive,function(){D=r(l)}):D=r(l):(q||z)&&A?((q=this.data("form-extra-data"))&&(a.isArray(q)?q.every(function(){l.push(this)}):l.push(q)),D=e(l)):D=h.ajax_caller(h);n.removeData("jqxhr").data("jqxhr",D);for(q=0;q<v.length;q++)v[q]=null;this.trigger("form-submit-notify",[this,h]);return this};a.fn.ajaxForm=function(d){d=
d||{};d.delegation=d.delegation&&a.isFunction(a.fn.on);d.ajax_caller=d.ajax_caller||a.ajax_caller||a.ajax;if(!d.delegation&&0===this.length){var f=this.selector,h=this.context;if(!a.isReady&&f)return b("DOM not ready, queuing ajaxForm"),a(function(){a(f,h).ajaxForm(d)}),this;b("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));return this}return d.delegation?(a(document).off("submit.form-plugin",this.selector,c).off("click.form-plugin",this.selector,e).on("submit.form-plugin",
this.selector,d,c).on("click.form-plugin",this.selector,d,e),this):this.ajaxFormUnbind().bind("submit.form-plugin",d,c).bind("click.form-plugin",d,e)};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b,d){var f=[];if(0===this.length)return f;var h=this[0],c=b?h.getElementsByTagName("*"):h.elements;if(!c)return f;var e,m,A;var v=0;for(A=c.length;v<A;v++){var l=c[v];if((e=l.name)&&!l.disabled)if(b&&h.clk&&"image"==l.type)h.clk==l&&
(f.push({name:e,value:a(l).val(),type:l.type}),f.push({name:e+".x",value:h.clk_x},{name:e+".y",value:h.clk_y}));else if((m=a.fieldValue(l,!0))&&m.constructor==Array){d&&d.push(l);var q=0;for(l=m.length;q<l;q++)f.push({name:e,value:m[q]})}else if(g&&"file"==l.type)if(d&&d.push(l),m=l.files,m.length)for(q=0;q<m.length;q++)f.push({name:e,value:m[q],type:l.type});else f.push({name:e,value:"",type:l.type});else null!==m&&"undefined"!=typeof m&&(d&&d.push(l),f.push({name:e,value:m,type:l.type,required:l.required}))}!b&&
h.clk&&(b=a(h.clk),d=b[0],(e=d.name)&&!d.disabled&&"image"==d.type&&(f.push({name:e,value:b.val()}),f.push({name:e+".x",value:h.clk_x},{name:e+".y",value:h.clk_y})));return f};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var d=[];this.each(function(){var f=this.name;if(f){var h=a.fieldValue(this,b);if(h&&h.constructor==Array)for(var c=0,e=h.length;c<e;c++)d.push({name:f,value:h[c]});else null!==h&&"undefined"!=typeof h&&d.push({name:this.name,
value:h})}});return a.param(d)};a.fn.fieldValue=function(b){for(var d=[],f=0,h=this.length;f<h;f++){var c=a.fieldValue(this[f],b);null===c||"undefined"==typeof c||c.constructor==Array&&!c.length||(c.constructor==Array?a.merge(d,c):d.push(c))}return d};a.fieldValue=function(b,d){var f=b.name,h=b.type,c=b.tagName.toLowerCase();void 0===d&&(d=!0);if(d&&(!f||b.disabled||"reset"==h||"button"==h||("checkbox"==h||"radio"==h)&&!b.checked||("submit"==h||"image"==h)&&b.form&&b.form.clk!=b||"select"==c&&-1==
b.selectedIndex))return null;if("select"==c){c=b.selectedIndex;if(0>c)return null;d=[];b=b.options;f=(h="select-one"==h)?c+1:b.length;for(c=h?c:0;c<f;c++){var e=b[c];if(e.selected){var g=e.value;g||(g=e.attributes&&e.attributes.value&&!e.attributes.value.specified?e.text:e.value);if(h)return g;d.push(g)}}return d}return a(b).val()};a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})};a.fn.clearFields=a.fn.clearInputs=function(b){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;
return this.each(function(){var f=a(this),c=this.type,h=this.tagName.toLowerCase();d.test(c)||"textarea"==h?this.value="":"checkbox"==c||"radio"==c?f.prop("checked",!1):"select"==h?this.selectedIndex=-1:"file"==c?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):b&&(!0===b&&/hidden/.test(c)||"string"==typeof b&&a(this).is(b))&&(this.value="")})};a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&
!this.reset.nodeType)&&this.reset()})};a.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){void 0===b&&(b=!0);return this.each(function(){var d=this.type;"checkbox"==d||"radio"==d?this.checked=b:"option"==this.tagName.toLowerCase()&&(d=a(this).parent("select"),b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b)})};a.fn.ajaxSubmit.debug=!1})(jQuery);
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function c(d){var f=d||window.event,c=h.call(arguments,1),m,r=0,v=0,l=0,q=0,y=0;if(d=a.event.fix(f),d.type="mousewheel","detail"in f&&(v=-1*f.detail),"wheelDelta"in f&&(v=f.wheelDelta),"wheelDeltaY"in f&&(v=f.wheelDeltaY),"wheelDeltaX"in f&&(r=-1*f.wheelDeltaX),"axis"in f&&f.axis===f.HORIZONTAL_AXIS&&(r=-1*v,v=0),m=0===v?r:v,"deltaY"in f&&(v=-1*f.deltaY,m=v),"deltaX"in
f&&(r=f.deltaX,0===v&&(m=-1*r)),0!==v||0!==r){if(1===f.deltaMode){var u=a.data(this,"mousewheel-line-height");m*=u;v*=u;r*=u}else 2===f.deltaMode&&(u=a.data(this,"mousewheel-page-height"),m*=u,v*=u,r*=u);if(l=Math.max(Math.abs(v),Math.abs(r)),(!g||g>l)&&(g=l,p.settings.adjustOldDeltas&&"mousewheel"===f.type&&0===l%120&&(g/=40)),p.settings.adjustOldDeltas&&"mousewheel"===f.type&&0===l%120&&(m/=40,r/=40,v/=40),m=Math[1<=m?"floor":"ceil"](m/g),r=Math[1<=r?"floor":"ceil"](r/g),v=Math[1<=v?"floor":"ceil"](v/
g),p.settings.normalizeOffset&&this.getBoundingClientRect)f=this.getBoundingClientRect(),q=d.clientX-f.left,y=d.clientY-f.top;return d.deltaX=r,d.deltaY=v,d.deltaFactor=g,d.offsetX=q,d.offsetY=y,d.deltaMode=0,c.unshift(d,m,r,v),b&&clearTimeout(b),b=setTimeout(e,200),(a.event.dispatch||a.event.handle).apply(this,c)}}function e(){g=null}var b,g,d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],f="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],
h=Array.prototype.slice;if(a.event.fixHooks)for(var m=d.length;m;)a.event.fixHooks[d[--m]]=a.event.mouseHooks;var p=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var b=f.length;b;)this.addEventListener(f[--b],c,!1);else this.onmousewheel=c;a.data(this,"mousewheel-line-height",p.getLineHeight(this));a.data(this,"mousewheel-page-height",p.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var b=f.length;b;)this.removeEventListener(f[--b],
c,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height");a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){b=a(b);var d=b["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(b.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},
unmousewheel:function(a){return this.unbind("mousewheel",a)}})});
(function(){function a(a){var c=a.handler,b=(a.namespace||"").toLowerCase().split("."),g=[],d;$.each(b,function(){""!=this&&"autocomplete"!=this&&/^(key|alt|ctrl|meta|shift)_/.test(this)?g.push(/^key_/.test(this)?this.substring(4):this):d=d?d+("."+this):this});0!=g.length&&(a.namespace=d,a.handler=function(a){if(this===a.target||!/textarea|select/i.test(a.target.nodeName)&&"text"!==a.target.type&&"true"!=$(a.target).prop("contenteditable")){var b=$.hotkeys.specialKeys[a.which||a.keyCode],d=String.fromCharCode(a.which).toLowerCase(),
f="",e={};a.altKey&&"alt"!==b&&(f+="alt_");a.ctrlKey&&"ctrl"!==b&&(f+="ctrl_");a.metaKey&&!a.ctrlKey&&"meta"!==b&&(f+="meta_");a.shiftKey&&"shift"!==b&&(f+="shift_");b?e[f+b]=!0:(e[f+d]=!0,e[f+$.hotkeys.shiftNums[d]]=!0,"shift_"===f&&(e[$.hotkeys.shiftNums[d]]=!0));b=0;for(d=g.length;b<d;b++)if(e[g[b]])return c.apply(this,arguments)}})}$.hotkeys={version:"0.8+",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",
35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?",
"\\":"|"}};$.each(["keydown","keyup","keypress"],function(){$.event.special[this]={add:a}})})();
var CHECKERS={validateByLength:function(a,c,e){var b=!0;if(a)a=a.trim();else return!0;switch(e){case "range":if(a<parseFloat(c[0],10)||a>parseFloat(c[1],10))b=!1;break;case "max":a>parseFloat(c[0],10)&&(b=!1);break;case "min":a<parseFloat(c[0],10)&&(b=!1);break;case "multipleOf":0!=a%parseInt(c[0],10)&&(b=!1);break;case "gt":a<=parseFloat(c[0],10)&&(b=!1);break;case "gte":a<parseFloat(c[0],10)&&(b=!1);break;case "lt":a>=parseFloat(c[0],10)&&(b=!1);break;case "lte":a>parseFloat(c[0],10)&&(b=!1);break;
case "rangelength":a=a.byteCount();if(a<parseFloat(c[0],10)||a>parseFloat(c[1],10))b=!1;break;case "maxlength":a.byteCount()>parseFloat(c[0],10)&&(b=!1);break;case "minlength":a.byteCount()<parseFloat(c[0],10)&&(b=!1);break;case "default":b=!1}return b},validateByCompare:function(a,c,e,b){var g=c,d=!0,f=function(a){var b=0;a=a.split("").reverse().join("");for(var d=a.length-1;0<=d;d--)b+=Math.pow(26,d)*(a.charCodeAt(d)-65+1);return b},h=function(a){for(var b="";0<a;){a--;var d=a%26;b=String.fromCharCode(d+
65)+b;a=(a-d)/26}return b};if("number"==e){if(16<a.length||16<c.length)return{msg_template:$.i18n.prop("num.of.digits.less.than.n",[16])};a=parseFloat(a,10);c=parseFloat(c,10)}else"date"===e?(a=Date.parse(a),c=Date.parse(c)):"alphabetic"==e&&(g=h(c),a=f(a));switch(b){case "gt":if(a<=c){d=!1;var m="value.must.greater"}break;case "gte":a<c&&(d=!1,m="value.must.greater.equal");break;case "eq":a!=c&&(d=!1,m="value.must.equal");break;case "ne":a==c&&(d=!1,m="value.must.not.equal");break;case "lte":a>c&&
(d=!1,m="value.must.less.equal");break;case "lt":a>=c&&(d=!1,m="value.must.less");break;case "mod":0!=a%c&&(d=!1,m="value.must.multiple.of");break;case "default":d=!1,m="unsupported.comparison.type"}return d||{msg_template:m,msg_params:[g]}}},VALIDATION_RULES={alphabetic:{check:function(a){return a?/^[a-zA-Z ]+$/.test(a):!0},msg_template:"enter.valid.alphabetic"},alphanumeric:{check:function(a){return a?/^[a-zA-Z0-9]+$/.test(a):!0},msg_template:"enter.valid.alphanumeric"},cardnumber:{check:function(a,
c){a=$.trim(a);var e={visa:/^4[0-9]{12}(?:[0-9]{3})?$/,master:/^5[1-5][0-9]{14}$/,diners:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,unionpay:/^(62|88)\d+$/,amex:/^3[47][0-9]{13}$/};c=c.filter("this != ''");if(0==c.length)return!0;for(var b=!1,g=0;g<c.length;g++)if(e[c[g].trim()].test(a)){b=!0;break}return b},msg_template:"incorrect.card.number"},commaSeparated4digit:{check:function(a){return a?/^[1-9]\d{0,3}(?:(?:,[1-9]\d{0,3})*)$/.test(a):!0},msg_template:"enter.comma.seperated.four.digit.numeric"},compare:{check:function(a,
c){if(!a)return!0;a=CHECKERS.validateByCompare(a,$("#"+c[0].trim()).val(),c[1].trim(),c[2].trim());return!0!==a?{msg_template:a.msg_template,msg_params:a.msg_params}:!0}},eq:{check:function(a,c){return(c=$("#"+c[0].trim()).val())&&!a?{msg_template:"field.required"}:a!=c?{msg_params:[c]}:!0},msg_template:"value.must.equal"},creditCardExpiryDate:{check:function(a,c){if(!a||!$("#"+c[0].trim()).val())return!0;var e=(new Date).getMonth()+1,b=(new Date).getFullYear().toString().substring(2,4);c=$("#"+c[0].trim()).val();
return c<b||a<e&&c<=b?{msg_template:"card.expired"}:!0}},creditcard:{check:function(a){if(/[^0-9-]+/.test(a))return!1;var c=0,e=!1;a=a.replace(/\D/g,"");for(var b=a.length-1;0<=b;b--){var g=a.charAt(b);g=parseInt(g,10);e&&9<(g*=2)&&(g-=9);c+=g;e=!e}return 0==c%10?!0:!1},msg_template:"enter.valid.creditcard"},cvv:{check:function(a){return a?2<a.length&&5>a.length&&/^\d+$/.test(a):!0},msg_template:"cvv.invalid"},date:{check:function(a,c){if(!a)return!0;var e="yyyy-MM-dd";c&&(e=c);this.msg_params=[e];
return!!Date.parseExact(a,e)},msg_template:"date.should.formatted"},digits:{check:function(a){return(a=$.trim(a))?16<a.length?(this.msg_template="",!1):/^\d+$/.test(a):!0},msg_template:"only.digits.allowed"},either_required:{check:function(a,c){var e=$("#"+c[0]).val();if(a||e)return!0;this.msg_params=[c[1],c[2]];return!1},msg_template:"either.required"},email:{check:function(a,c){return a?(new RegExp("^\\s*"+(c?'(((([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))|([^<>,;]+\\s*<(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))>))':
'(((([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))|([^<>,;]+\\s*<(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))>))([,;]\\s*(((([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))|([^<>,;]+\\s*<(([^<>()[\\]\\\\.,;:\\s@"]+(\\.[^<>()[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))>)))*;?')+
"\\s*$")).test(a):!0},msg_template:"enter.valid.email"},single_email:{check:function(a){return a?VALIDATION_RULES.email.check(a,!0):!0},msg_template:"enter.valid.email"},empty:{check:function(a){return $.trim(a)?!1:!0},msg_template:"field.must.empty"},eval:{check:function(a,c){try{return eval(c[0])}catch(e){return!1}},msg_template:"entry.invalid"},"drop-file-required":{check:function(a,c,e){if(a)return!0;var b=e.attr("name");a=e.closest("form").data("form-extra-data");if(!a)return!1;if(window.File){if(a.value instanceof
File&&a.name==b)return!0;if($.isArray(a)){var g;a.every(function(){if(this.value instanceof window.File&&this.name==b)return g=this,!1});if(g)return!0}}return!1},msg_template:"no.file.selected"},"function":{check:function(a,c,e){try{return bm.prop(window,c[0]).call(e,a,VALIDATION_RULES["function"])}catch(b){return!1}},msg_template:"entry.invalid"},gt:{check:function(a,c){return!0!==CHECKERS.validateByLength(a,c,"gt")?{msg_params:c}:!0},msg_template:"value.must.greater"},gte:{check:function(a,c){return!0!==
CHECKERS.validateByLength(a,c,"gte")?{msg_params:c}:!0},msg_template:"value.must.greater.equal"},lt:{check:function(a,c){return!0!==CHECKERS.validateByLength(a,c,"lt")?{msg_params:c}:!0},msg_template:"value.must.less"},lte:{check:function(a,c){return!0!==CHECKERS.validateByLength(a,c,"lte")?{msg_params:c}:!0},msg_template:"value.must.less.equal"},hexColor:{check:function(a){if(a=$.trim(a))return/^#?[0-9a-fA-F]{6}$/.test(a)},msg_template:"invalid.hexadecimal.color"},hexDigit:{check:function(a){return(a=
$.trim(a))?/[0-9a-fA-F]$/.test(a):!0},msg_template:"invalid.hexadecimal.digit"},identifier:{check:function(a,c){return a?"multi"==c?/^[a-zA-Z_][a-zA-Z_0-9]*(\s+[a-zA-Z_][a-zA-Z_0-9]*)*$/.test(a):/^[a-zA-Z_][a-zA-Z_0-9]*$/.test(a):!0},msg_template:"only.alphanumeric.underscore.supported"},least_selection:{check:function(a,c,e){return!!e.find(":checked").length},msg_template:"least.option.must.select"},match:{check:function(a,c){return a&&!(new RegExp(c[0])).test(a)?{msg_template:"invalid.format.use.like",
msg_params:[c[1]]}:!0}},max:{check:function(a,c){return!0!==CHECKERS.validateByLength(a,c,"max")?{msg_params:c}:!0},msg_template:"value.must.less.equal"},maxlength:{check:function(a,c){return!0!==CHECKERS.validateByLength(a,c,"maxlength")?{msg_params:c}:!0},msg_template:"enter.no.more.characters"},maxprecision:{check:function(a,c){var e=1==c.length?void 0:c[0],b=1==c.length?c[0]:c[1];c=new RegExp("^(\\+|-)?\\d"+(e?"{0,"+e+"}":"*")+"(?:\\.\\d{0,"+b+"})?$");e?(this.msg_template="maximum.number.precision.allowed",
e=[e,b]):(this.msg_template="maximum.precision.allowed",e=[b]);return c.test(a)?!0:{msg_params:e}}},price:{check:function(a){return VALIDATION_RULES.maxprecision.check.apply(this,[a,[9,+app.maxPricePrecision]])}},min:{check:function(a,c){return!0!==CHECKERS.validateByLength(a,c,"min")?{msg_params:c}:!0},msg_template:"value.must.greater.equal"},minlength:{check:function(a,c){return!0!==CHECKERS.validateByLength(a,c,"minlength")?{msg_params:c}:!0},msg_template:"enter.least.characters"},multipleOf:{check:function(a,
c){return!0!==CHECKERS.validateByLength(a,c,"multipleOf")?{msg_params:c}:!0},msg_template:"value.must.multiple.of"},number:{check:function(a){return(a=$.trim(a))?/^(\+|-)?\d*(?:\.\d+)?$/.test(a):!0},msg_template:"enter.valid.number"},percent_number:{check:function(a){a=$.trim(a);return"%"==a?!1:a?/^(\+|-)?\d*(?:\.\d+)?%?$/.test(a):!0},msg_template:"enter.valid.number"},partial_url:{check:function(a){return(a=$.trim(a))?/^(((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)+)(:\d*)?))?(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a):
!0},msg_template:"enter.valid.url"},phone:{check:function(a){return(a=$.trim(a))?/^\+?[0-9\(\)\-\s]+$/.test(a):!0},msg_template:"phone.invalid"},range:{check:function(a,c){return!0!==CHECKERS.validateByLength(a,c,"range")?{msg_params:c}:!0},msg_template:"value.must.between"},rangelength:{check:function(a,c){return!0!==CHECKERS.validateByLength(a,c,"rangelength")?{msg_params:c}:!0},msg_template:"value.must.length.between"},required:{check:function(a){return $.trim(a)?!0:!1},msg_template:"field.required"},
restricted_chars:{check:function(a,c){var e=0;return a&&($.each(c,function(){e=a.indexOf(this);if(-1<e)return!1}),-1<e)?{msg_params:[c.join(",")]}:!0},msg_template:"characters.not.supported"},url:{check:function(a){return(a=$.trim(a))?/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)+)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a):
!0},msg_template:"enter.valid.url"},domain_name:{check:function(a){return a?null!=a.match(/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/):!0},msg_template:"enter.valid.domain.name"},url_folder:{check:function(a){return a?/^(([a-z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+$/i.test(a):!0},msg_template:"enter.valid.url.path"},non_symbolic:{check:function(a){return a?/^( *[a-zA-Z0-9\-_]+)+$/.test(a):
!0},msg_template:"enter.valid.non.symbolic"},skip:{},skip_next:{},check:{},check_next:{},fail:{}},ValidationRule=function(){function a(a,e){for(var b=!0,c=e;b;){c=a.indexOf("]",c);if(-1==c)throw Error("No Param Terminator ']'");(b="]"==a.charAt(c+1))&&(c+=2)}return a.substring(e,c)}return{addRule:function(a,e){VALIDATION_RULES[a]=e},getRule:function(a){return VALIDATION_RULES[a]},createRules:function(c,e){e=e||0;var b=c.length;if(e>=b)return[];var g=c.indexOf(" ",e);-1==g&&(g=b);var d=c.indexOf("[",
e);-1==d&&(d=b);var f=c.indexOf("@",e);-1==f&&(f=b);var h=c.indexOf("}",e);-1==h&&(h=b);var m=c.indexOf("{",e);-1==m&&(m=b);g=c.substring(e,Math.min(d,f,g,h,m));if(""==g)return ValidationRule.createRules(c,e+1);var p=VALIDATION_RULES[g];if(null==p)throw Error("Invalid Rule Format/Name");var r=[];p={rule:p};r.push(p);var n=e+g.length;e=function(){for(;"@"==c.charAt(f);){a:{var a=c,b=f+1;var d={condition:{}};var h=a.charAt(b);if("i"==h)d.condition.type="if",b+=3;else if("v"==h){d.condition.type="if";
d.parsedIndex=b+6;d.condition.check_type="self";d.condition.selector=":visible";break a}else if("h"==h){d.condition.type="if";d.parsedIndex=b+5;d.condition.check_type="self";d.condition.selector=":hidden";break a}else d.condition.type="not",b+=4;if("g"==a.charAt(b)){b+=7;h=a.indexOf("}",b);if(-1==h)throw Error("Invalid Rule Format/Name");d.condition.check_type="global";d.condition.selector=a.substring(b,h)}else if("t"==a.charAt(b)){b+=5;h=a.indexOf("}",b);if(-1==h)throw Error("Invalid Rule Format/Name");
d.condition.check_type="this";d.condition.selector=a.substring(b,h)}else if("s"==a.charAt(b)){b+=5;h=a.indexOf("}",b);if(-1==h)throw Error("Invalid Rule Format/Name");d.condition.check_type="self";d.condition.selector=a.substring(b,h)}else{d.condition.check_type="rule";b+=5;h=a.indexOf("}",b+1);for(var e=a.indexOf("{",b+1);-1!=h&&-1!=e&&e<h;)h=a.indexOf("}",h+1),e=a.indexOf("{",e+1);if(-1==h)throw Error("Invalid Rule Format/Name");a=a.substring(b,h);d.condition.rules=ValidationRule.createRules(a)}d.parsedIndex=
h}p.condition?$.isArray(p.condition)?p.condition.push(d.condition):p.condition=[p.condition,d.condition]:p.condition=d.condition;f=d.parsedIndex+1}n=f};n==d&&d!=b?(m=a(c,d+1),n+=m.length+2,p.param=m.replace(/\]\]/g,"]").exSplit(),f==n&&d!=b&&e()):f==n&&m!=b&&e();n!=b&&" "==c.charAt(n)&&(b=ValidationRule.createRules(c,n+1),$.each(b,function(){r.push(this)}));return r}}}();
(function(){function a(b,f){for(var d=f.length,c=null,e=0;e<d;e++){var g=f[e];if("undefined"!=typeof g.error)return g.error;var n=!0;if(g.condition)for(var w=$.isArray(g.condition)?g.condition:[g.condition],z=w.length-1;-1<z;z--){var A=!0,v=w[z];switch(v.check_type){case "global":0==$(v.selector).length&&(A=!1);break;case "self":":blank"==v.selector?(A=b.val(),A=""==$.trim(A)):A=b.is(v.selector);break;case "this":A=0!=b.find(v.selector).length;break;case "rule":A=null==a(b,v.rules)}if("if"==v.type&&
!A||"not"==v.type&&A){n=!1;break}}w=g.rule;if(w==VALIDATION_RULES.skip)if(n)break;else continue;if(w==VALIDATION_RULES.skip_next)n&&e++;else{if(w==VALIDATION_RULES.check)if(n)continue;else break;if(w==VALIDATION_RULES.check_next)n||e++;else if(w==VALIDATION_RULES.fail){if(n)return(f=b.attr("message_params_"+e)||b.attr("message_params"))&&(f=f.split(" ")),{msg_template:b.attr("message_template_"+e)||b.attr("message_template")||"entry.invalid",msg_params:f||[],rule:w}}else if(n&&(g=g.param,g=w.check(b.val(),
g,b),!0!==g&&((c=b.attr("message_template_"+e)||b.attr("message_template"))||(c=g.msg_template||w.msg_template),c||(c=""),(n=(n=b.attr("message_params_"+e)||b.attr("message_params"))?n.exSplit(" "):g.msg_params||w.msg_params)||(n=[]),c={msg_template:c,msg_params:n,rule:w})),null!=c)break}}return c}var c={validate_on:{text:["blur"],password:["blur"],select:["change"],radio:["change"],file:["change"],checkbox:["change"],container:["change"]},validate_on_call_only:!1,clear_on_focus:!0,show_error:!0,
attribute_name:"validation",error_class:"validation-error",re_init_on_valid:!1,error_position:"after",error_parent_ref_class:void 0,show_error_close:!0,error_template:"<div class='errorlist'><span class='pointer'></span><span class='close-btn'></span><div class='message-block message-text'></div></div>",displayError:void 0},e=0,b=function(a,b){this.fields=[];this.elm=a;this.instance_count=e++;var d=a.config("validation");$.extend(!0,this,c,d,b);this.attribute_name=d.attr||this.attribute_name;this.attach(a.find("["+
this.attribute_name+"]"))};window.ValidationPanel=b;b.prototype={attach:function(a,b){var d=this;a.each(function(){var a=$(this);a.on("jqclean",function(){d.detach(a)});var f=new g(a,d,b);a.data("validator-filed-inst",f);d.fields.push(f)})},isValid:function(){$.each(this.fields,function(){this.validate()});var a=!0;$.each(this.fields,function(){if(!this.valid)return a=!1});return a},detach:function(a){a.length&&(a=a[0]);var b=-1;$.each(this.fields,function(d){if(this.elm[0]==a)return b=d,this.destroy(),
!1});-1<b&&this.fields.splice(b,1)},getValidatorRules:function(a){a.length&&(a=a[0]);var b;$.each(this.fields,function(){if(this.elm[0]==a)return b=this.validatorRules,!1});return b},addValidatorRule:function(a,b,c){a.length&&(a=a[0]);var d=!1;$.each(this.fields,function(){if(this.elm[0]==a){var f="string"==typeof b?ValidationRule.createRules(b):[{rule:{check:b,msg_template:c}}];var h=this;$.each(f,function(){h.validatorRules.push(this)});d=!0;return!1}});d||this.attach($(a),this)},destroy:function(){$.each(this.fields,
function(){this.destroy()});this.fields=[]},reInit:function(){this.destroy();this.attach(this.elm.find("["+this.attribute_name+"]"),this)},position:function(){this.fields.each(function(){this.valid||this.showError(this.error)})},state:function(){return this.fields.collect("valid").all()}};var g=function(a,b,c){this.elm=a;var d=a.config("validation");this.options=$.extend(!0,{},bm.omit(b,["fields","elm","instance_count"],!0),d,c);this.instance_count=e++;this.valid=!0;this.options.displayError&&(this.showError=
this.options.displayError);this.options.error_position=a.attr("error-position")||(b.elm?b.elm.attr("error-position"):void 0)||this.options.error_position;this.options.validate_on_call_only=a.attr("validate-on")?"call-only"==a.attr("validate-on"):"call-only"==this.options.validate_on||this.options.validate_on_call_only;if(this.options.attribute_name)if(a=a.attr(this.options.attribute_name),""==$.trim(a))this.validatorRules=[];else try{this.validatorRules=ValidationRule.createRules(a)}catch(p){this.validatorRules=
[{error:"invalid.rule.format.name"}];return}else this.validatorRules=[];this.options.detached||this.initEvents()};window.ValidationField={createDetachedField:function(a,b){b=$.extend({detached:!0},b);return new g(a,$.extend(!0,{},c,b))},validateAs:function(b,f){try{return a(b,ValidationRule.createRules(f))}catch(h){return{msg_template:$.i18n.prop("unable.validate"),msg_params:[],rule:void 0}}}};g.prototype={initEvents:function(){var a=this.elm,b=".validator_"+this.instance_count;a.off(b);var c=this;
a.on("validate"+b,function(){c.validate()});if(!this.options.validate_on_call_only){var e=function(a,b){var d=a.is("select")?"select":a.is("textarea")?"text":a.is("[type='file']")?"file":a.is("[type='text']")?"text":a.is("[type='password']")?"password":a.is("[type='radio']")?"radio":a.is("[type='checkbox']")?"checkbox":"container";var f=a.attr("validate-on");f=f?f.split(","):c.options.validate_on[d];$.isArray(f)||(f=[f]);$.each(f,function(){switch(""+this){case "immediate":a.on("ichange"+b,function(){c.validate()});
break;default:a.on(this+b,function(){c.validate()})}})};e(a,b);var g=this.elm.attr("depends");g&&(g=$(g),g.length&&(b=a.attr("id"),b||(b=bm.getUUID(),a.attr("id",b)),b=".validator_"+this.instance_count+"_"+b,a.off(b),e(g,b)))}this.options.clear_on_focus&&a.bind("focus"+b,function(){c.clear()})},validate:function(){function b(a){f.valid=!1;f.error=a;a.validator=f;!1!==f.elm.trigger("invalid",a)&&f.options.show_error&&f.showError(a)}var f=this,c=f.elm,e=f.validatorRules;if(!e)return!0;f.clear();try{var g=
a(c,e);null!=g?b(g):(f.valid=!0,f.elm.trigger("valid"))}catch(r){b({msg_template:r.message,msg_params:[],rule:void 0})}return f.valid},clear:function(){if(this.errorBlock){var a=this.elm.removeClass(this.options.error_class).attr("error-on");a?(a=$("#"+a),a.removeClass(this.options.error_class)):a=this.elm;if("inline"==this.options.error_position){var b=a;a.find(".inline-error-target").length&&(b=a.find(".inline-error-target"));if("password"==b.attr("type")){if(b=a[0].inlineErrorProxy)b.remove(),
delete a[0].inlineErrorProxy;a.css("visibility","visible")}else a=b.attr("value-cache"),b.val(a),b.removeAttr("value-cache")}this.errorBlock.siblings(".message-block").length?this.errorBlock.remove():(this.errorBlock.closest(".errorlist").remove(),this.elm.removeClass("error-field-error"));this.errorBlock=null;this.elm.trigger("clear-error")}},destroy:function(){this.clear();this.elm.off(".validator_"+this.instance_count)},showError:function(a){this.errorBlock&&this.clear();var b="function"==typeof this.options.error_template?
this.options.error_template.call(this,a):$(this.options.error_template);this.elm.addClass("error-field-error");var d=this.elm.addClass(this.options.error_class).attr("error-on");d?(d=$("#"+d),d.addClass(this.options.error_class)):d=this.elm;var c=b.find(".message-block"),e=c.is(".message-text")?c:c.find(".message-text");e.append($.i18n.prop(a.msg_template,a.msg_params));b.addClass(this.options.error_position);switch(this.options.error_position){case "inline":d.find(".inline-error-target").length&&
(d=d.find(".inline-error-target"));if("password"==d.attr("type")){var g=d.clone();g.attr("type","text");d.after(g);g.val(e.text()).addClass("inline-error");g.focus(function(){g.remove();d.css("visibility","visible")[0].focus();delete d[0].inlineErrorProxy}).css({position:"absolute"}).offset(d.offset());d.css("visibility","hidden");d[0].inlineErrorProxy=g}else a=d.val(),d.val(e.text()).addClass("inline-error"),d.attr("value-cache",a);break;case "after":e=d.next(".errorlist");e.length?e.find(".message-block:last").after(c):
d.after(b);break;case "before":e=d.prev(".errorlist");e.length?e.find(".message-block:last").after(c):d.before(b);break;case "parent-after":a=this.options.error_parent_ref_class?d.closest("."+this.options.error_parent_ref_class):d.parent();e=a.next(".errorlist");e.length?e.find(".message-block:last").after(c):a.after(b);break;case "parent-before":a=this.options.error_parent_ref_class?d.closest("."+this.options.error_parent_ref_class):d.parent();e=a.prev(".errorlist");e.length?e.find(".message-block:last").after(c):
a.before(b);break;case "none":break;default:switch(b.addClass("positioned-error"),a=this.options.error_position.substring(11),e=d.next(".errorlist"),e.length?e.find(".message-block:last").after(c):(d.after(b),e=b),a){case "up":e.position({my:"left bottom",at:"left+50 top-"+e.bottomRib(!0,!1,!1),of:d,collision:"none"});break;case "below":e.position({my:"left top",at:"left+50 bottom+"+e.topRib(!0,!1,!1),of:d,collision:"none"});break;case "right":e.position({my:"left top",at:"right+"+e.leftRib(!0,!1,
!1)+" top-"+.33*e.outerHeight(),of:d,collision:"none"});break;case "left":e.position({my:"right top",at:"left-"+e.leftRib(!0,!1,!1)+" top-"+.33*e.outerHeight(),of:d,collision:"none"})}}this.errorBlock=c;this.options.show_error_close?b.find(".close-btn").click(function(){b.hide()}):b.find(".close-btn").remove()},isValid:function(){this.validate();return this.valid}};$.extend($.fn,{attachValidator:function(a){return this.each(function(){var d=$(this),c=new b(d,a||{});d.data("validator-inst",c)})},valid:function(a){var b=
!0;this.each(function(){var d=$(this),c=d.data("validator-inst")||d.data("validator-filed-inst");if(c){if("string"==typeof a)return c[a]();c.re_init_on_valid&&c.reInit()}else d.attachValidator(a||{}),c=d.data("validator-inst");d=c.isValid();b=b&&d});return b},clearValidator:function(){this.each(function(){var a=$(this),b=a.data("validator-inst");b&&(b.destroy(),a.removeData("validator"))})},updateValidator:function(a){this.clearValidator();return this.attachValidator(a||{})},clearValidationMessage:function(a){this.find(".errorlist").remove();
this.find(".validation-error").removeClass("validation-error").removeClass("error-field-error")}});window.validation={setDefaults:function(a){$.extend(c,a,{validate_on:$.extend({},c.validate_on,a.validate_on)})}}})();
var POPUP_STATICS={z_index:{active:8E3,modal_base:3E3,no_modal:1E3,always_up:5E4},active_stack:[],next_instance_identifier:1,modal_mask:void 0,minimized_placeholder:void 0},_popup_defaults={clazz:"",minimized_clazz:"",animation_clazz:"",closing_animation_clazz:"",closing_animation_duration:300,show_title:!0,title:null,minimized_title:null,draggable:!1,drag_handle:".title-bar",drag_cancel:":input",disable_text_selection:!1,resizable:!1,maximizable:!1,minimizable:!1,modal:!0,show_close:!0,masking:!0,
close_on_mask_click:!1,close_on_blur:!1,close_on_escape:!0,auto_close:!1,reset_close_timer_on_hover:!0,width:"auto",max_width:null,height:"auto",top:null,left:null,ui_position:null,is_fixed:!1,is_center:!0,is_always_up:!1,always_up_z_index:void 0,auto_active:!0,auto_active_on_focus:!0,ajax_url:void 0,ajax_caller:bm.ajax,ajax_settings:{},on_load_loader:!0,content:"",content_clazz:"",template:'<div>\r\n        <div class="title-bar">\r\n            <span class="title"></span>\r\n            <span class="window-corner-toolbar">\r\n                <span class="minimize"></span>\r\n                <span class="maximize"></span>\r\n                <span class="close"></span>\r\n            </span>\r\n        </div>\r\n        <div class="content"></div>\r\n    </div>',
minimized_content:"",minimized_template:'<div>\r\n        <span class="title"></span>\r\n        <span class="content"></span>\r\n    </div>',parent:void 0,events:{beforeClose:void 0,close:void 0,beforeMinimize:void 0,minimize:void 0,beforeRestore:void 0,restore:void 0,maximize:void 0,beforeMaximize:void 0,render:void 0,beforeRender:void 0,beforeInactive:void 0,inactive:void 0,beforeActive:void 0,active:void 0,content_loaded:void 0}},POPUP=function(a){$.extend(this,_popup_defaults,a);this.instance_identifier=
POPUP_STATICS.next_instance_identifier++;this.z_index=this.is_always_up?this.always_up_z_index||POPUP_STATICS.z_index.always_up:this.modal?POPUP_STATICS.z_index.modal_base+=10:POPUP_STATICS.z_index.no_modal;this.is_active=this.is_rendered=!1;this.event_handlers=$({});this.parent&&this.parent.addChild(this);this.createPopup();this.render();this.auto_active&&this.setActive()},_p=POPUP.prototype;
_p.addChild=function(a){this.childs||(this.childs=[]);this.childs.push(a);var c=this;a.on("close",function(){var a=c.childs.indexOf(this);c.childs.splice(a,1)})};_p.one=function(a,c){this.event_handlers.one(a,$.proxy(c,this.el))};_p.on=function(a,c){this.event_handlers.on(a,$.proxy(c,this.el))};_p.off=function(a){this.event_handlers.off(a)};
_p.trigger=function(a,c){c||(c=[this]);var e;this.events[a]&&(e=this.events[a].apply(this.el,c));!1!==e&&(e=this.event_handlers.trigger(a,c));return!1!==e?this.el.trigger("wcui-popup-"+a,c):!1};_p.render=function(){this.trigger("beforeRender");this.setMask();this.setContent();this.bindEvents();this.trigger("render");this.is_rendered=!0};
_p.createPopup=function(){this.el||(this.el=$(this.template));this.content_clazz&&this.el.find(">.content").addClass(this.content_clazz);this.el.css({position:this.is_fixed?"fixed":"absolute",left:this.left||-1E4,top:this.top||-1E4,width:this.width,maxWidth:this.max_width,height:this.height,zIndex:this.z_index}).appendTo(this.parent?this.parent.el:document.body);this.el.addClass(this.clazz+" popup "+this.animation_clazz);this.show_title||(this.show_close||this.maximizable||this.minimizable?this.el.find(".title-bar").removeClass("title-bar").addClass("no-title-bar"):
this.el.find(".title-bar").remove());this.show_close||this.el.find("span.close").remove();this.maximizable||this.el.find("span.maximize").remove();this.minimizable||this.el.find("span.minimize").remove();this.show_title&&this.title&&this.el.find(".title").html(this.title);this.el.attr("id","popup-"+this.instance_identifier);this.el.attr("tabindex","-1")};
_p.setMask=function(){if(this.modal){POPUP_STATICS.modal_mask||(POPUP_STATICS.modal_mask=$("<div></div>").appendTo(document.body));var a=["popup-mask"];this.clazz.split(" ").every(function(){$.trim(this)&&a.push(this+"-mask")});POPUP_STATICS.modal_mask.attr("class",a.join(" ")).css({zIndex:this.z_index-5}).show()}};_p.hideMask=function(){this.modal&&1<=POPUP_STATICS.active_stack.count("this.modal && !this.is_hidden")&&POPUP_STATICS.modal_mask.hide()};
_p.setContent=function(a){var c=this,e=this.el.find(".content:first");e.length||(e=this.el);if(a||!this.ajax_url)(a=a||this.content)&&e.html(a),this.position(),c.trigger("content_loaded");else{this.el.addClass("ajax-loading");this.on_load_loader&&e.html('<span class="loader"></span>');if(!this.is_rendered){var b=this.width;"auto"==b&&(b=300);var g=this.height;"auto"==g&&(g=300);this.position(void 0,b,g)}this.ajax_caller($.extend({url:this.ajax_url,dataType:"html",response:function(){c.el.removeClass("ajax-loading")},
success:function(a){e.html(a);c.trigger("ajax_loaded");"auto"==c.width&&c.el.width("auto");"auto"==c.height&&c.el.height("auto");c.position();c.trigger("content_loaded")},error:function(b,f,h){c.el.addClass("http-"+b.status+"-error");a=$("<div class='ajax-loading-error'></div>").append(h);e.html(a);c.trigger("content_loading_error")}},this.ajax_settings))}};
_p.position=function(a,c,e){var b=-2E3>this.el.offset().left?"css":"animate";if(a)this.el[b](a);else if(!this.ui_position||this.left||this.top)if(this.is_center){var g=$(window).height();a=$(window).width();var d=e||this.el.outerHeight(),f=c||this.el.outerWidth();a=this.left||a/2-f/2;g=this.top||g/2-d/2;this.is_fixed||(d=$(window).scrollTop(),f=$(window).scrollLeft(),a+=f,g+=d);a={left:Math.max(20,a),top:Math.max(20,g)};c&&(a.width=c);e&&(a.height=e);this.el[b](a)}else this.el[b]({left:this.left||
100,top:this.top||100,width:c||this.width,height:e||this.height});else{a=this.ui_position;if(!a.using&&"animate"==b){var h=this;a=$.extend({},a,{using:function(a){h.el.animate(a)}})}this.el.position(a)}};
_p.setActive=function(){if(!this.is_active){var a=this;if(0<POPUP_STATICS.active_stack.length){var c=!0;this.masking&&(c=POPUP_STATICS.active_stack[POPUP_STATICS.active_stack.length-1].setInactive());if(!1===c)return}this.trigger("beforeActive");this.el.find(".inactive-mask").hide();a.el.removeClass("inactive");setTimeout(function(){a.el.addClass("active")},200);this.el.css({zIndex:Math.max(this.z_index,POPUP_STATICS.z_index.active)});c=POPUP_STATICS.active_stack.find(this.instance_identifier+" == this.instance_identifier");
-1<c&&POPUP_STATICS.active_stack.splice(c,1);POPUP_STATICS.active_stack.push(this);this.trigger("active");this.is_active=!0;for(c=this;!c.modal&&c.parent;)c=c.parent;c.modal&&c.setMask();this.el.focus()}};
_p.setInactive=function(){if(this.is_active){if(!1===this.trigger("beforeInactive"))return!1;var a=this;this.el.removeClass("active").addClass("inactive");this.el.css({zIndex:this.z_index});var c=this.el.find(".inactive-mask");c.length||(c=$("<div class='inactive-mask'></div>").appendTo(this.el),c.on("mousedown",function(){a.setActive()}));c.show();this.trigger("inactive");this.is_active=!1;this.hideMask()}};
_p.bindEvents=function(){var a=this;this.el.find(".close").click(function(){a.close(1)});!0===this.close_on_mask_click&&POPUP_STATICS.modal_mask&&POPUP_STATICS.modal_mask.bind("click.popup-mask-click-"+this.instance_identifier).click(function(){a.is_active&&a.close(1)});!0===this.close_on_blur&&$(document).bind("mousedown.popup-out-click-"+this.instance_identifier,function(b){var d=a.el;d.is(b.target)||0!==d.has(b.target).length||a.is_active&&a.close(1)});this.close_on_escape&&$(document).bind("keyup.key_esc.popup-escape-"+
this.instance_identifier,function(){a.is_active&&a.close(1)});this.auto_close&&(this.resetCloseTimer(),this.reset_close_timer_on_hover&&this.el.hover(function(){a.clearCloseTimer()},function(){a.resetCloseTimer()}));this.auto_active_on_focus&&this.el.bind("focus",function(){a.setActive()});if(this.draggable){a=this;var c="*"==this.drag_handle?this.el:this.el.find(this.drag_handle),e=this.el.offset(),b=c.offset(),g=b.top-e.top,d=b.left-e.left;this.el.draggable({handle:"*"==this.drag_handle?void 0:
c,cancel:this.drag_cancel,disable_text_selection:this.disable_text_selection,stop:function(){var b=c.offset(),e=!1;b.left<-1*c.outerWidth()+50&&(b.left=5,e=!0);b.top<-1*c.outerHeight()+50&&(b.top=5,e=!0);e&&a.el.offset({left:b.left-d,top:b.top-g})},start:function(){a.animation_clazz&&a.el.removeClass(a.animation_clazz)}})}};_p.clearCloseTimer=function(){this.auto_close_timer&&(clearTimeout(this.auto_close_timer),this.auto_close_timer=null)};
_p.resetCloseTimer=function(){this.clearCloseTimer();var a=this;this.auto_close_timer=setTimeout(function(){a.auto_close_timer=null;a.close(0)},this.auto_close)};
_p.unbindEvents=function(){!0===this.close_on_mask_click&&POPUP_STATICS.modal_mask&&POPUP_STATICS.modal_mask.unbind("click.popup-mask-click-"+this.instance_identifier);!0===this.close_on_blur&&$(document).unbind("mousedown.popup-out-click-"+this.instance_identifier);this.close_on_escape&&$(document).unbind("keyup.key_esc.popup-escape-"+this.instance_identifier);this.clearCloseTimer()};
(function(){function a(){if(this.is_active&&POPUP_STATICS.active_stack.length)for(var a;;)if(a=POPUP_STATICS.active_stack[POPUP_STATICS.active_stack.length-1])if(a.is_closed||a.is_hidden)POPUP_STATICS.active_stack.pop();else{a.setActive();break}else break}_p.close=function(c){var e=this;!1!==this.trigger("beforeClose",[c])&&(this.unbindEvents(),this.closing_animation_clazz?(this.el.removeClass("active").removeClass(this.animation_clazz).addClass(this.closing_animation_clazz),setTimeout(function(){e.el.remove()},
this.closing_animation_duration)):this.el.remove(),this.hideMask(),this.is_active&&POPUP_STATICS.active_stack.pop(),this.is_closed=!0,a.call(this),this.trigger("close",[c]))};_p.hide=function(){this.el.hide();this.hideMask();this.is_hidden=!0}})();_p.show=function(){this.el.show();this.setActive();this.is_hidden=!1};_p.getDom=function(){return this.el};
$.prototype.popup=function(a){var c=this.data("popup-inst");if("string"==typeof a&&c)return $.isFunction(c[a])?c[a](Array.prototype.splice.call(arguments,1)):c[a];c||(c=new POPUP($.extend({},a,{el:this})),this.data("popup-inst",c));return this};
(function(){function a(a){var b=this,d=this.data("form-inst");d.submitButton||(d.submitButton=this.find("[type='submit'], .submit-button"),1<d.submitButton.length&&this.attr("class").split(" ").every(function(){var a=d.submitButton.filter("."+this+"-submit");if(a.length)return d.submitButton=a,!1}));d.disable_on_invalid=this.attr("disable-on-invalid")?"true"==this.attr("disable-on-invalid"):(a.hasOwnProperty("disable_on_invalid"),d.disable_on_invalid);$.each(g,function(){this.call(b,a)})}var c={preSubmit:void 0,
disable_on_submit:!0,disable_on_invalid:!0,text_change_on_submit:!0},e="very.weak weak better medium strong strongest".split(" "),b="very-weak weak better medium strong strongest".split(" "),g=$.form_care_functions={checkbox:function(){this.find("input:checkbox[name][uncheck-value]").pairuncheck()},auto_toggle:function(){bm.autoToggle&&bm.autoToggle(this)},textarea:function(){$.form_no_textarea_autosize||this.find("textarea:not('.no-auto-size')").autosize()},events:function(a){var b=this,c=a.elm;
b.is(c)&&this.bind("submit",function(){return browser.ie&&8==browser.version&&b.data("ie8-prevent-submit")?(b.removeData("ie8-prevent-submit"),!1):d.submit.call(a)});c.is("form")||(b.find("input, textarea").bind("keydown.key_return",function(){c.triggerHandler("submit");if(browser.ie&&8==browser.version){var a=c.closest("form");a.length&&a.data("ie8-prevent-submit",!0)}else return!1}),b.is(c)&&(a.submitButton.click(function(){b.triggerHandler("submit")}),b.find(".reset-button").click(function(){b.triggerHandler("reset")})))},
validation:function(a){var b=a.validation_config||{},d=this.attr("error-position");d?b.error_position=d:window.app&&app.is_front_end&&(d=this.attr("validation-config-key"))&&(d=app.config["validation_"+d+"_error_position"])&&(b.error_position=d);this.is(a.elm)?this.attachValidator(b):a.elm.obj(ValidationPanel).attach(this.find("[validation]"),b)},restrict:function(){this.find(":text[restrict]").each(function(){var a=$(this);a[a.attr("restrict")]()})},unique:function(){var a=this,b=this.attr("action")||
this.attr("unique-action");if(b){var d=b.lastIndexOf("/");b=b.substring(0,d)+"/";var c=this.find("input[name=id]").length,e=0;this.find(".unique").each(function(){var d=$(this);bm.unique({url:b+(d.attr("unique-action")||"isUnique"),restoreUrl:b+(d.attr("unique-restore")||"restoreFromTrash"),editMode:c,elm:d,form:a,uniqueFieldCount:e+=1,fieldError:!1,inTrash:!1})})}},focus_on_row:function(){this.find(".form-row > input").focus(function(){$(this).parent().addClass("active-row")}).blur(function(){$(this).parent().removeClass("active-row")})},
disable_on_invalid:function(a){if(a.disable_on_invalid){var b=!1;this.find("[validation]").each(function(){var c=bm.getUUID();$(this).bind("invalid.form_js",function(e){if(e.target==e.currentTarget){d.lock.call(a,c);if(!b&&(e=$(this),window.app&&!app.is_front_end)){var f=e.parents(".scrollable.vertical");f.length&&f.scrollTo(e,{offsetTop:"180"})}b=!0}}).bind("remove.form_js clear-error.form_js",function(e){e.target==e.currentTarget&&(d.unlock.call(a,c),b=!1)})})}},password_strength_meter:function(){var a=
this.find(".password-strength-meter");$.each(a,function(a,d){$(d).on("keyup",function(){var a=$(d).val(),c=0;6<a.length&&c++;a.match(/[a-z]/)&&a.match(/[A-Z]/)&&c++;a.match(/\d+/)&&c++;a.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)&&c++;12<a.length&&c++;var f=$(d).siblings();$.each(f,function(a,b){if($(b).hasClass("password-meter-wrap"))return g=$(b),!1});if(!g){var g=$("<span class='password-meter-wrap'></span>");$(d).after(g)}f=g.find(".password-description");0==f.length&&g.append("<div class='password-description'></div>");
f.text($.i18n.prop(e[c]));0==a.length&&f.text("");f=g.find(".password-strength-bar");0==f.length&&g.append("<div class='password-strength-bar'></div>");f.removeClass();f.addClass("password-strength-bar "+b[c]);0==a.length&&f.removeClass()})})},abn_input_formatting:function(){var a=this.find(".abn-validation");a.on({keypress:function(a){var b=a.which;if(!(48<=b&&57>=b))return a.preventDefault(),!1},keyup:function(b){var d=b.which;b=a.val();var c="";if(!(37<=d&&40>=d)&&8!=d&&(b=b.replace(/\s+/g,""),
2<b.length)){for(d=0;d<b.length;d++)2==d?c+=" ":5==d?c+=" ":8==d&&(c+=" "),c+=b[d];a.val(c)}}})}},d={append:function(a){var b=this;$.each(g,function(){this.call(a,b)})},lock:function(a){this.lock||(this.lock={});this.lock[a]=!0;this.submitButton&&this.submitButton.attr("disabled","disabled");this.elm.trigger("lock")},unlock:function(a){this.lock&&this.lock[a]&&delete this.lock[a];$.isEmptyObject(this.lock)&&(this.submitButton&&this.submitButton.removeAttr("disabled"),this.elm.trigger("unlock"))},
prop:function(a,b){return bm.prop(this,a,b)},force_submit:function(a){var b=this,c=bm.getUUID();this.elm.addClass("submitting");d.lock.call(this,c);this.disable_on_submit&&this.submitButton&&(this.text_change_on_submit&&b.submitButton.each(function(){var a=$(this),d=a.text();this.orgText=d;b.disable_button_text?a.text(b.disable_button_text):(d=d==$.i18n.prop("create")?$.i18n.prop("creating"):d==$.i18n.prop("update")?$.i18n.prop("updating"):$.i18n.prop("submitting"),a.text(d+" ..."))}),this.submitButton.attr("disabled",
"disabled"));var e=$.extend({},!0===this.ajax?{}:this.ajax);a=a||{};e.success&&a.success&&(a.success=a.success.blend(e.success));e.error&&a.error&&(a.error=a.error.blend(e.error));if(e.response||a.response)var f=function(){a.response&&a.response.apply(this,arguments);e.response&&e.response.apply(this,arguments)};e.complete&&a.complete&&(a.complete=a.complete.blend(e.complete));var g=$.extend({},e,a);this.elm.is("form")||(g.data=$.extend(this.elm.serializeObject(),g.data),!g.url&&g.controller&&(g.url=
app.baseUrl+g.controller+"/"+g.action));this.elm.ajaxSubmit($.extend(g,{response:function(a,e,g,h){b.elm.removeClass("submitting");d.unlock.call(b,c);"success"==a?b.elm.trigger("ajax-submit-success",[e,g,h]):b.elm.trigger("ajax-submit-error",[h,g,e]);b.disable_on_submit&&(b.text_change_on_submit&&b.submitButton.each(function(){$(this).text(this.orgText)}),b.submitButton.removeAttr("disabled","disabled"));f&&f.apply(b.elm,arguments)}}))},submit:function(a){if(!$.isEmptyObject(this.lock))return!1;try{if(!this.elm.valid())return a&&
a.invalid&&a.invalid.call(this.elm),!1;if(this.elm.attr("disabled"))return!1;var b=!0;if("function"===typeof this.preSubmit){a=a||(this.ajax?{}:null);if(a){var c=a.success;a.success=void 0}b=this.preSubmit.call(this.elm,a);a&&a.success&&c?a.success=a.success.blend(c):a&&c&&(a.success=c)}if(!1!==b&&this.ajax)return d.force_submit.call(this,a),!1;!1!==b&&this.disable_on_submit&&!this.ajax&&(this.onSubmitLockId=bm.getUUID(),d.lock.call(this,this.onSubmitLockId));return b}catch(p){return log(p.stack),
!1}},set_submit:function(a){this.submitButton=a}};$.fn.form=function(b){if("string"==typeof b){var e,f=Array.prototype.slice.call(arguments,1);this.each(function(){var a=$(this).data("form-inst");if(!a)return!0;e="function"==typeof d[b]?d[b].apply(a,f):a[b];if("undefined"!=typeof e)return!1});return"undefined"!=typeof e?e:this}this.each(function(){var d=$(this);if(!d.data("form-inst")){var e=$.extend({},c,b,{elm:d});d.data("form-inst",e);a.call(d,e)}});return this}})();
$.scrollbar_horizontal_without_bar_step=100;
(function(){function a(){var a=this,b=this.configs.vertical.add_margin_with_height?this.elm.outerHeight(!0):this.configs.vertical.reduce_padding_from_height?this.elm.height():this.elm.innerHeight();this.v_bar.height(b);var d=function(b,d,c){b=a["v_"+b+"_offset"];return 0<b?d+b:c+-1*b};b=d("left","+","-");var c=d("top","+","-");d=d("right","-","+");switch(this.configs.vertical.position){case "left":this.v_bar.position({my:"left top",at:"left"+b+" top"+c,of:this.elm});break;case "right":bm.posRefChangeLtoR(this.v_bar.position({my:"right top",
at:"right"+d+" top"+c,of:this.elm}))}}function c(){var a=this,b=this.configs.horizontal.add_margin_with_width?this.elm.outerWidth(!0):this.configs.horizontal.reduce_padding_from_width?this.elm.width():this.elm.innerWidth();this.configs.horizontal.width&&(b+=this.configs.horizontal.width);this.v_bar.width(b);var d=function(b,d,c){b=a["v_"+b+"_offset"];return 0<b?d+b:c+-1*b};b=d("left","+","-");d=d("bottom","-","+");switch(this.configs.horizontal.position){case "bottom":this.h_bar.position({my:"bottom left",
at:"bottom"+d+" left"+b,of:this.elm})}}function e(){if(this.ready_for_show){var a=this.elm.innerWidth(),b=this.elm[0].scrollWidth;if("always"==this.configs.visible_on||a<b){this.h_bar_shown?c.call(this):h.call(this,!1,!0);this.h_bar_shown&&(this.mouse_on_h||this.h_dragging?m.call(this,!1,!0):p.call(this,!1,!0));var d=this.h_bar.innerWidth();this.h_handler.css("width",bm.innerWidth(this.h_handler,a/b*d,!0));a=this.elm.scrollTop();this.h_handler.css("top",a/b*d)}else this.h_bar_shown&&r.call(this,!0,
!1,!0)}else this.h_bar_shown&&c.call(this)}function b(){var a=this,b=this.elm[0].setCapture;this.elm.mousemove(function(b){var d=a.elm.offset().top;d="bottom"==a.configs.horizontal.position?d+(a.elm.height()-a.h_bar.css("bottom").int()):d+a.h_bar.css("top").int();100>Math.abs(d-b.pageY)?(a.h_bar_in_area=!0,m.call(a,!1,!0),a.h_bar_shown||e.call(a,!0)):(a.h_bar_in_area=!1,a.h_hide_timer||!a.h_bar_shown||a.h_dragging||p.call(a,!1,!0))});this.h_bar.hover(function(){a.mouse_on_h=!0},function(){a.mouse_on_h=
!1});var d,c,f,g,h,n=function(d){a.h_dragging=!1;b?d.target.releaseCapture():(document.removeEventListener("mouseup",n,!0),document.removeEventListener("mousemove",v,!0));a.h_bar_in_area||r.call(a,!1,!0,!0)},v=function(b){if(a.h_dragging){bm.clearTextSelection();var e=c+(b.pageX-d);0>e&&(d=b.pageX,c=0);e+g>h&&(d=b.pageX,c=h-g);a.elm.scrollLeft(Math.round(e*f));a.update()}};this.h_handler.mousedown(function(e){d=e.pageX;c=a.h_handler.position().left;h=a.h_bar.innerWidth();f=a.elm[0].scrollWidth/h;
b?e.target.setCapture():(document.addEventListener("mouseup",n,!0),document.addEventListener("mousemove",v,!0));a.h_dragging=!0;g=a.h_handler.outerWidth()});b&&this.h_handler.mouseup(n).mousemove(v)}function g(){var a=this;if(this.configs.use_bar)b.call(this);else{var d=this.configs.horizontal.step||$.scrollbar_horizontal_without_bar_step;d="auto"==d?this.elm.width():$.scrollbar_horizontal_without_bar_step;this.configs.horizontal.handle.left.click(function(){w?a.elm.animate({scrollTop:"-="+d}):a.elm.animate({scrollLeft:"-="+
d})});this.configs.horizontal.handle.right.click(function(){w?a.elm.animate({scrollTop:"+="+d}):a.elm.animate({scrollLeft:"+="+d})})}}function d(){var a=this,b=this.elm[0].setCapture;this.elm.bind("mousewheel.scrollbar",function(b){var d=a.elm,c=d.scrollTop(),e=d[0].scrollHeight,f=d.innerHeight();if(0==c&&0<b.deltaY||0>b.deltaY&&c+f==e)return!0;d.scrollTop(c-b.deltaY*b.deltaFactor).trigger("vscroll");a.update();return!1});this.v_bar.hover(function(){a.mouse_on_v=!0},function(){a.mouse_on_v=!1});var d,
c,e,f,g,h=function(d){a.v_dragging=!1;b?d.target.releaseCapture():(document.removeEventListener("mouseup",h,!0),document.removeEventListener("mousemove",m,!0));a.mouse_on_v||p.call(a,!0,!1)},m=function(b){if(a.v_dragging){bm.clearTextSelection();var h=c+(b.pageY-d);0>h&&(d=b.pageY,c=0);h+f>g&&(d=b.pageY,c=g-f);a.elm.scrollTop(Math.round(h*e));a.update()}};this.v_handler.mousedown(function(l){d=l.pageY;c=a.v_handler.position().top;g=a.v_bar.innerHeight();e=a.elm[0].scrollHeight/g;b?l.target.setCapture():
(document.addEventListener("mouseup",h,!0),document.addEventListener("mousemove",m,!0));a.v_dragging=!0;f=a.v_handler.outerHeight()});b&&this.v_handler.mouseup(h).mousemove(m)}function f(){var a=this;$.fn.swipe&&a.elm.swipe({swipe:function(b,d){!a.configs.show_horizontal||"left"!=d&&"right"!=d||(b=a.configs.horizontal.step||$.scrollbar_horizontal_without_bar_step,b="auto"==b?a.elm.width():$.scrollbar_horizontal_without_bar_step,"right"==d?a.elm.animate({scrollLeft:"-="+b}):a.elm.animate({scrollLeft:"+="+
b}));if(a.configs.show_vertical&&("up"==d||"down"==d))return d="up"==d?1:-1,b=a.elm.scrollTop(),a.elm.scrollTop(b-40*d),this.ready_for_show=!0,a.update(),!1},threshold:30})}function h(b,d){this.configs.show_vertical&&b&&(this.v_bar.stop(!0,!0).show(),this.v_bar_shown&&a.call(this),this.v_bar_shown=!0);this.configs.show_horizontal&&d&&(this.h_bar.stop(!0,!0).show(),this.h_bar_shown&&c.call(this),this.h_bar_shown=!0)}function m(a,b){a&&this.v_hide_timer&&(clearTimeout(this.v_hide_timer),this.v_hide_timer=
null,this.v_bar_shown&&h.call(this,a));b&&this.h_hide_timer&&(clearTimeout(this.h_hide_timer),this.h_hide_timer=null,this.h_bar_shown&&h.call(this,!1,b))}function p(a,b){m(a,b);a&&(this.configs.hide_after?(h.call(this,a),this.v_hide_timer=setTimeout(function(){this.v_hide_timer=null;r.call(this,!0,!1)}.bind(this),this.configs.hide_after)):r.call(this,!0,!1));b&&(this.configs.hide_after?(h.call(this,!1,b),this.h_hide_timer=setTimeout(function(){this.h_hide_timer=null;r.call(this,!1,!0)}.bind(this),
this.configs.hide_after)):r.call(this,!1,!0))}function r(a,b,d){arguments.length||(a=b=!0);if(this.v_bar_shown&&this.configs.show_vertical&&a){var c=function(){this.v_bar_shown=!1}.bind(this);d?(this.v_bar.hide(),c()):this.v_bar.fadeOut(1500,c)}this.h_bar_shown&&this.configs.show_horizontal&&b&&(c=function(){this.h_bar_shown=!1}.bind(this),d?(this.h_bar.hide(),c()):this.h_bar.fadeOut(1500,c))}function n(){var a=this.container.find("tr:has(th)"),b=a.clone();a.copyDeepEvents(b,!0);var d=this.container.find("table");
if(this.false_header_row)var c=this.false_header_row.closest("table");else c=$("<div class='scrollable-table-header-wrapper'><table class='scrollable-table-header'></table></div>"),c=c.find("table"),d.copyEvents(c,!0);c.html(this.container.find("colgroup").clone()).append(b);this.false_header_row=c.find("tr:first");a.hide();return b}$.scrollbar={defaults:{show_vertical:!0,show_horizontal:!1,visible_on:"hover",hide_after:8E3,use_bar:!0,reduce_margin_from_offset:!1,add_padding_with_offset:!0,vertical:{position:"right",
offset:void 0,top_offset:5,right_offset:5,left_offset:void 0,add_margin_with_height:!1,reduce_padding_from_height:!1},horizontal:{position:"bottom",offset:void 0,top_offset:void 0,bottom_offset:5,left_offset:5,add_margin_with_width:!1,reduce_padding_from_width:!0,width:-10},swipe_scroll:!1}};$.tablescrollbar={defaults:{use_parent_as_wrapper:!0}};var w=!1,z=!1;window.Scrollbar=function(a,b){this.elm=a instanceof $?a:$(a);this.configs=$.extend(!0,{},$.scrollbar.defaults,b);this.init();this.render();
this.bindEvents();this.ready_for_show="always"==this.configs.visible_on||"auto"==this.configs.visible_on;this.update()};var A=Scrollbar.prototype;A.init=function(){this.elm.addClass("scrollable");var a=this.configs.reduce_margin_from_offset?[!0,!0,!1]:[!1,!1,this.configs.add_padding_with_offset];a=this.configs.reduce_margin_from_offset?{left:-1*this.elm.leftRib.apply(this.elm,[].concat($jscomp.arrayFromIterable(a))),top:-1*this.elm.topRib.apply(this.elm,[].concat($jscomp.arrayFromIterable(a))),right:-1*
this.elm.rightRib.apply(this.elm,[].concat($jscomp.arrayFromIterable(a))),bottom:-1*this.elm.bottomRib.apply(this.elm,[].concat($jscomp.arrayFromIterable(a)))}:{left:this.elm.leftRib.apply(this.elm,[].concat($jscomp.arrayFromIterable(a))),top:this.elm.topRib.apply(this.elm,[].concat($jscomp.arrayFromIterable(a))),right:this.elm.rightRib.apply(this.elm,[].concat($jscomp.arrayFromIterable(a))),bottom:this.elm.bottomRib.apply(this.elm,[].concat($jscomp.arrayFromIterable(a)))};this.v_top_offset=(null==
this.configs.vertical.offset?this.configs.vertical.top_offset:this.configs.vertical.offset)+a.top;this.v_right_offset=(null==this.configs.vertical.offset?this.configs.vertical.right_offset:this.configs.vertical.offset)+a.right;this.v_left_offset=(null==this.configs.vertical.offset?this.configs.vertical.left_offset:this.configs.vertical.offset)+a.left;this.h_top_offset=(null==this.configs.horizontal.offset?this.configs.horizontal.top_offset:offset)+a.top;this.h_bottom_offset=(null==this.configs.horizontal.offset?
this.configs.horizontal.bottom_offset:offset)+a.bottom;this.h_left_offset=(null==this.configs.horizontal.offset?this.configs.horizontal.left_offset:offset)+a.left};A.update=function(){if(this.configs.show_vertical&&this.configs.use_bar)if(this.ready_for_show){var b=this.elm.innerHeight(),d=this.elm[0].scrollHeight;if("always"==this.configs.visible_on||b<d){this.v_bar_shown?a.call(this):h.call(this,!0,!1);this.v_bar_shown&&(this.mouse_on_v||this.v_dragging?m.call(this,!0,!1):p.call(this,!0,!1));var c=
this.v_bar.innerHeight();this.v_handler.css("height",bm.innerHeight(this.v_handler,b/d*c,!0));b=this.elm.scrollTop();this.v_handler.css("top",b/d*c)}else this.v_bar_shown&&r.call(this,!0,!1,!0)}else this.v_bar_shown&&a.call(this);this.configs.show_horizontal&&(this.configs.use_bar?e.call(this,!1):"auto"==this.configs.visible_on&&(d=this.elm.innerWidth(),c=this.elm[0].scrollWidth,b=this.elm.innerHeight(),w=b<this.elm[0].scrollHeight&&d<b?!0:!1,(z=d<c&&d>b?!0:!1)||w?this.configs.horizontal.handle.left.is(":hidden")&&
(this.elm.addClass("content-overflow"),this.configs.horizontal.handle.left.show(),this.configs.horizontal.handle.right.show()):this.configs.horizontal.handle.left.is(":visible")&&(this.elm.removeClass("content-overflow"),this.configs.horizontal.handle.left.hide(),this.configs.horizontal.handle.right.hide())));return this};A.render=function(){if(this.configs.show_vertical&&this.configs.use_bar){this.elm.addClass("vertical-scroll").css("overflow-y","hidden");var b=this.v_bar="<div class='vertical scrollbar'></div>".jqObject.css("position",
"absolute").hide(),d=this.v_handler="<div class='scrollbar-handle'></div>".jqObject;b.append(d);this.elm.after(b);"static"==b.css("position")&&b.css("position","absolute");"auto"!=this.configs.vertical.position&&a.call(this)}this.configs.show_horizontal&&this.configs.use_bar&&(this.elm.addClass("horizontal-scroll").css("overflow-x","hidden"),b=this.h_bar="<div class='horizontal scrollbar'></div>".jqObject.css("position","absolute").hide(),d=this.h_handler="<div class='scrollbar-handle'></div>".jqObject,
b.append(d),this.elm.after(b),"auto"!=this.configs.horizontal.position&&c.call(this));this.configs.swipe_scroll&&f.call(this)};A.destroy=function(){this.h_hide_timer&&clearTimeout(this.h_hide_timer);this.v_hide_timer&&clearTimeout(this.v_hide_timer);this.elm.removeClass("scrollable vertical horizontal").off("hover").off("mousewheel.scrollbar");this.elm.is(this.elm)||this.elm.parent().unwrapInner();this.v_bar&&this.v_bar.remove();this.h_bar&&this.h_bar.remove()};A.bindEvents=function(){var a=this;
"hover"==this.configs.visible_on&&this.elm.add(this.h_bar&&this.v_bar?this.h_bar.add(this.v_bar):this.h_bar||this.v_bar).hover(function(){this.ready_for_show=!0;m.call(this,!0,!0);setTimeout(function(){this.update()}.bind(this),0)}.bind(this),function(){this.v_dragging||this.h_dragging||(this.ready_for_show=!1,setTimeout(function(){this.mouse_on_v||this.mouse_on_h||r.call(this)}.bind(this),0))}.bind(this));this.configs.show_vertical&&d.call(this);this.configs.show_horizontal&&g.call(this);this.elm.find(".scrollbar").on("remove",
function(){a.destroy()})};var v=Scrollbar.prototype;window.TableScroll=function(a,b){b&&(b=$.extend({},$.tablescrollbar.defaults,b));v.constructor.call(this,a,b)};TableScroll.inherit(Scrollbar);A=TableScroll.prototype;A.init=function(){this.configs.show_horizontal=!1;this.configs.show_vertical=!1;this.container=this.elm.wrap("<div class='scrollable-table-wrapper'></div>").parent();var a=n.call(this),b=this.false_header_row.closest(".scrollable-table-header-wrapper");this.container.before(b).css({marginTop:-1*
parseFloat(a.find("th:first").css("border-bottom-width"))});this.top_row_height=b.outerHeight();"auto"==this.configs.vertical.height?(a=this.container.parent().height(),this.configs.vertical.height=a-this.top_row_height):this.configs.vertical.height-=this.top_row_height;this.container.scrollbar({show_vertical:!0,vertical:{offset:0,step:"auto"}})};A.height=function(a){v.height.call(this,a-this.top_row_height)};A.destroy=function(){v.destroy.call(this);this.false_header_row.closest(".scrollable-table-header-wrapper").remove();
var a=this.container.find("tr:has(th)");a=this.container.find("table").prepend(a.show());a.parent().replaceWith(a)};A.content=function(a){if(a){var b=a.parentsUntil("tr"),d=this.false_header_row;b.length&&b.each(function(){var a=$(this).index();d=d.children().eq(a)});b=a.index();d=d.children().eq(b);b=a.clone();a.copyDeepEvents(b,!0);d.replaceWith(b)}else n.call(this),this.update();return this.container.find("table")};A.header=function(){return this.false_header_row}})();bm.jquerify("scrollbar",Scrollbar);
bm.jquerify("tscrollbar",TableScroll);bm&&bm.ui_updaters&&bm.ui_updaters.push(function(){this.find(".scrollable").addBack(".scrollable").each(function(){var a=this.jqObject,c=a.scrollbar("inst");c?c.update():(c=a.config("scrollable"),a.is("table")?a.tscrollbar(c):a.scrollbar(c))})});
var Hashtable=function(){function a(b){var d;if("string"==typeof b)return b;if(typeof b.hashCode==p)return d=b.hashCode(),"string"==typeof d?d:a(d);if(typeof b.toString==p)return b.toString();try{return String(b)}catch(y){return Object.prototype.toString.call(b)}}function c(a,b){return a.equals(b)}function e(a,b){return typeof b.equals==p?b.equals(a):a===b}function b(a){return function(b){if(null===b)throw Error("null is not a valid "+a);if("undefined"==typeof b)throw Error(a+" must not be undefined");
}}function g(a,b,d,c){this[0]=a;this.entries=[];this.addEntry(b,d);null!==c&&(this.getEqualityFunction=function(){return c})}function d(a){return function(b){for(var d=this.entries.length,c,e=this.getEqualityFunction(b);d--;)if(c=this.entries[d],e(b,c[0]))switch(a){case z:return!0;case A:return c;case v:return[d,c[1]]}return!1}}function f(a){return function(b){for(var d=b.length,c=0,e=this.entries.length;c<e;++c)b[d+c]=this.entries[c][a]}}function h(a,b){return(a=a[b])&&a instanceof g?a:null}function m(b,
d){var c=this,e=[],f={},l=typeof b==p?b:a,q=typeof d==p?d:null;this.put=function(a,b){n(a);w(b);var d=l(a),c,m,r=null;return c=h(f,d),c?(m=c.getEntryForKey(a),m?(r=m[1],m[1]=b):c.addEntry(a,b)):(c=new g(d,a,b,q),e[e.length]=c,f[d]=c),r};this.get=function(a){n(a);var b=l(a);if(b=h(f,b))if(a=b.getEntryForKey(a))return a[1];return null};this.containsKey=function(a){n(a);var b=l(a);return(b=h(f,b))?b.containsKey(a):!1};this.containsValue=function(a){w(a);for(var b=e.length;b--;)if(e[b].containsValue(a))return!0;
return!1};this.clear=function(){e.length=0;f={}};this.isEmpty=function(){return!e.length};var v=function(a){return function(){for(var b=[],d=e.length;d--;)e[d][a](b);return b}};this.keys=v("keys");this.values=v("values");this.entries=v("getEntries");this.remove=function(a){n(a);var b=l(a),d=null,c=h(f,b);if(c&&(d=c.removeEntryForKey(a),null!==d&&!c.entries.length)){a:{for(a=e.length;a--;)if(c=e[a],b===c[0])break a;a=null}r(e,a);delete f[b]}return d};this.size=function(){for(var a=0,b=e.length;b--;)a+=
e[b].entries.length;return a};this.each=function(a){for(var b=c.entries(),d=b.length,e;d--;)e=b[d],a(e[0],e[1])};this.putAll=function(a,b){a=a.entries();for(var d,e,f,g=a.length,h=typeof b==p;g--;)d=a[g],e=d[0],d=d[1],h&&(f=c.get(e))&&(d=b(e,f,d)),c.put(e,d)};this.clone=function(){var a=new m(b,d);return a.putAll(c),a}}var p="function",r=typeof Array.prototype.splice==p?function(a,b){a.splice(b,1)}:function(a,b){var d;if(b===a.length-1)a.length=b;else{var c=a.slice(b+1);a.length=b;var e=0;for(d=c.length;e<
d;++e)a[b+e]=c[e]}},n=b("key"),w=b("value"),z=0,A=1,v=2;return g.prototype={getEqualityFunction:function(a){return typeof a.equals==p?c:e},getEntryForKey:d(A),getEntryAndIndexForKey:d(v),removeEntryForKey:function(a){return(a=this.getEntryAndIndexForKey(a))?(r(this.entries,a[0]),a[1]):null},addEntry:function(a,b){this.entries[this.entries.length]=[a,b]},keys:f(0),values:f(1),getEntries:function(a){for(var b=a.length,d=0,c=this.entries.length;d<c;++d)a[b+d]=this.entries[d].slice(0)},containsKey:d(z),
containsValue:function(a){for(var b=this.entries.length;b--;)if(a===this.entries[b][1])return!0;return!1}},m}();
(function(a){function c(a,b,d){this.dec=a;this.group=b;this.neg=d}function e(a,e){if(0==b.size())for(var f=0;f<d.length;f++){localeGroup=d[f];for(var h=0;h<localeGroup.length;h++)b.put(localeGroup[h],f)}f=".";h=",";0==e&&(-1!=a.indexOf("_")?a=a.split("_")[1].toLowerCase():-1!=a.indexOf("-")&&(a=a.split("-")[1].toLowerCase()));(a=b.get(a))&&(a=g[a])&&(f=a[0],h=a[1]);return new c(f,h,"-")}var b=new Hashtable,g=[[".",","],[",","."],[","," "],[".","'"]],d=["ae au ca cn eg gb hk il in jp sk th tw us".split(" "),
"at br de dk es gr it nl pt tr vn".split(" "),"cz fi fr ru se pl".split(" "),["ch"]];a.fn.formatNumber=function(b,d,c){return this.each(function(){null==d&&(d=!0);null==c&&(c=!0);var e;a(this).is(":input")?e=new String(a(this).val()):e=new String(a(this).text());e=a.formatNumber(e,b);d&&(a(this).is(":input")?a(this).val(e):a(this).text(e));if(c)return e})};a.formatNumber=function(b,d){d=a.extend({},a.fn.formatNumber.defaults,d);e(d.locale.toLowerCase(),d.isFullLocale);for(var c="",f=!1,g=0;g<d.format.length;g++){if(-1!=
"0#-,.".indexOf(d.format.charAt(g))){if(0==g&&"-"==d.format.charAt(g)){f=!0;continue}break}c+=d.format.charAt(g)}var h="";for(g=d.format.length-1;0<=g&&-1=="0#-,.".indexOf(d.format.charAt(g));g--)h=d.format.charAt(g)+h;d.format=d.format.substring(c.length);d.format=d.format.substring(0,d.format.length-h.length);b=new Number(b);return a._formatNumber(b,d,h,c,f)};a._formatNumber=function(b,d,c,g,r){d=a.extend({},a.fn.formatNumber.defaults,d);var f=e(d.locale.toLowerCase(),d.isFullLocale),h=f.dec,m=
f.group;f=f.neg;var p=!1;if(isNaN(b)){if(1!=d.nanForceZero)return null;b=0;p=!0}"%"==c&&(b*=100);var v="";if(-1<d.format.indexOf(".")){var l=h,q=d.format.substring(d.format.lastIndexOf(".")+1);1==d.round?b=new Number(b.toFixed(q.length)):(b=b.toString(),b=b.substring(0,b.lastIndexOf(".")+q.length+1),b=new Number(b));var y=new String((b%1).toFixed(q.length));y=y.substring(y.lastIndexOf(".")+1);for(var u=0;u<q.length;u++)if("#"==q.charAt(u)&&"0"!=y.charAt(u))l+=y.charAt(u);else{if("#"==q.charAt(u)&&
"0"==y.charAt(u)){if(y.substring(u).match("[1-9]")){l+=y.charAt(u);continue}break}"0"==q.charAt(u)&&(l+=y.charAt(u))}v+=l}else b=Math.round(b);u=Math.floor(b);0>b&&(u=Math.ceil(b));l="";-1==d.format.indexOf(".")?l=d.format:l=d.format.substring(0,d.format.indexOf("."));q="";if(0!=u||"#"!=l.substr(l.length-1)||p){p=new String(Math.abs(u));y=9999;-1!=l.lastIndexOf(",")&&(y=l.length-l.lastIndexOf(",")-1);var B=0;for(u=p.length-1;-1<u;u--)q=p.charAt(u)+q,B++,B==y&&0!=u&&(q=m+q,B=0);if(l.length>q.length&&
(u=l.indexOf("0"),-1!=u))for(u=l.length-u,p=l.length-q.length-1;q.length<u;)y=l.charAt(p),","==y&&(y=m),q=y+q,p--}return!q&&-1!==l.indexOf("0",l.length-1)&&(q="0"),v=q+v,0>b&&r&&0<g.length?g=f+g:0>b&&(v=f+v),d.decimalSeparatorAlwaysShown||v.lastIndexOf(h)==v.length-1&&(v=v.substring(0,v.length-1)),v=g+v+c,v};a.fn.parseNumber=function(b,d,c){null==d&&(d=!0);null==c&&(c=!0);var e;a(this).is(":input")?e=new String(a(this).val()):e=new String(a(this).text());if(b=a.parseNumber(e,b))if(d&&(a(this).is(":input")?
a(this).val(b.toString()):a(this).text(b.toString())),c)return b};a.parseNumber=function(b,d){d=a.extend({},a.fn.parseNumber.defaults,d);var c=e(d.locale.toLowerCase(),d.isFullLocale),g=c.dec,f=c.group;for(c=c.neg;-1<b.indexOf(f);)b=b.replace(f,"");b=b.replace(g,".").replace(c,"-");g="";f=!1;if("%"==b.charAt(b.length-1)||1==d.isPercentage)f=!0;for(d=0;d<b.length;d++)-1<"1234567890.-".indexOf(b.charAt(d))&&(g+=b.charAt(d));b=new Number(g);f&&(b/=100,d=g.indexOf("."),b=-1!=d?b.toFixed(g.length-d-1+
2):b.toFixed(g.length-1));return b};a.fn.parseNumber.defaults={locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,isFullLocale:!1};a.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1};Number.prototype.toFixed=function(b){return a._roundNumber(this,b)};a._roundNumber=function(a,b){var d=Math.pow(10,b||0);a=String(Math.round(a*d)/d);if(0<b)for(d=a.indexOf("."),-1==d?(a+=".",d=0):d=a.length-(d+1);d<b;)a+="0",d++;return a}})(jQuery);
(function(){var a={};this.tmpl=function g(e,b){e=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):a[e]=a[e]||g(document.getElementById(e).innerHTML);return b?e(b):e}})();
(function(a){a.baseClass=function(c){return c=a(c),c.get(0).className.match(/([^ ]+)/)[1]};a.fn.addDependClass=function(c,e){var b=e?e:"-";return this.each(function(){var e=a.baseClass(this);e&&a(this).addClass(e+b+c)})};a.fn.removeDependClass=function(c,e){var b=e?e:"-";return this.each(function(){var e=a.baseClass(this);e&&a(this).removeClass(e+b+c)})};a.fn.toggleDependClass=function(c,e){var b=e?e:"-";return this.each(function(){var e=a.baseClass(this);e&&(a(this).is("."+e+b+c)?a(this).removeClass(e+
b+c):a(this).addClass(e+b+c))})}})(jQuery);
(function(a){function c(){this._init.apply(this,arguments)}c.prototype.oninit=function(){};c.prototype.events=function(){};c.prototype.onmousedown=function(){this.ptr.css({position:"absolute"})};c.prototype.onmousemove=function(a,b,c){this.ptr.css({left:b,top:c})};c.prototype.onmouseup=function(){};c.prototype.isDefault={drag:!1,clicked:!1,toclick:!0,mouseup:!1};c.prototype._init=function(){if(0<arguments.length){this.ptr=a(arguments[0]);this.outer=a(".draggable-outer");this.is={};a.extend(this.is,
this.isDefault);var c=this.ptr.offset();this.d={left:c.left,top:c.top,width:this.ptr.width(),height:this.ptr.height()};this.oninit.apply(this,arguments);this._events()}};c.prototype._getPageCoords=function(a){return a.targetTouches&&a.targetTouches[0]?{x:a.targetTouches[0].pageX,y:a.targetTouches[0].pageY}:{x:a.pageX,y:a.pageY}};c.prototype._bindEvent=function(a,b,c){this.supportTouches_?a.get(0).addEventListener(this.events_[b],c,!1):a.bind(this.events_[b],c)};c.prototype._events=function(){var c=
this;this.supportTouches_=browser.gc&&-1!=navigator.userAgent.indexOf("Mobile");this.events_={click:this.supportTouches_?"touchstart":"click",down:this.supportTouches_?"touchstart":"mousedown",move:this.supportTouches_?"touchmove":"mousemove",up:this.supportTouches_?"touchend":"mouseup"};this._bindEvent(a(document),"move",function(a){c.is.drag&&(a.stopPropagation(),a.preventDefault(),c._mousemove(a))});this._bindEvent(a(document),"down",function(a){c.is.drag&&(a.stopPropagation(),a.preventDefault())});
this._bindEvent(a(document),"up",function(a){c._mouseup(a)});this._bindEvent(this.ptr,"down",function(a){return c._mousedown(a),!1});this._bindEvent(this.ptr,"up",function(a){c._mouseup(a)});this.ptr.find("a").click(function(){c.is.clicked=!0;if(!c.is.toclick)return c.is.toclick=!0,!1}).mousedown(function(a){return c._mousedown(a),!1});this.events()};c.prototype._mousedown=function(c){this.is.drag=!0;this.is.clicked=!1;this.is.mouseup=!1;var b=this.ptr.offset(),e=this._getPageCoords(c);this.cx=e.x-
b.left;this.cy=e.y-b.top;a.extend(this.d,{left:b.left,top:b.top,width:this.ptr.width(),height:this.ptr.height()});this.outer&&this.outer.get(0)&&this.outer.css({height:Math.max(this.outer.height(),a(document.body).height()),overflow:"hidden"});this.onmousedown(c)};c.prototype._mousemove=function(a){this.is.toclick=!1;var b=this._getPageCoords(a);this.onmousemove(a,b.x-this.cx,b.y-this.cy)};c.prototype._mouseup=function(a){this.is.drag&&(this.is.drag=!1,this.outer&&this.outer.get(0)&&(browser.ff?this.outer.css({overflow:"hidden"}):
this.outer.css({overflow:"visible"}),browser.ie&&6==browser.version?this.outer.css({height:"100%"}):this.outer.css({height:"auto"})),this.onmouseup(a))};window.Draggable=c})(jQuery);
(function(a){function c(a){return"undefined"==typeof a?!1:a instanceof Array||!(a instanceof Object)&&"[object Array]"==Object.prototype.toString.call(a)||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice")?!0:!1}function e(){return this.init.apply(this,arguments)}function b(){Draggable.apply(this,arguments)}a.slider=function(b,c){var d=a(b);return d.data("jslider")||d.data("jslider",new e(b,c)),d.data("jslider")};
a.fn.slider=function(b,e){var d,g=arguments;return this.each(function(){var f=a.slider(this,b);if("string"==typeof b)switch(b){case "value":void 0!==g[1]&&void 0!==g[2]?(f=f.getPointers(),null!=f[0]&&null!=g[1]&&(f[0].set(g[1]),f[0].setIndexOver()),null!=f[1]&&null!=g[2]&&(f[1].set(g[2]),f[1].setIndexOver())):void 0!==g[1]?(f=f.getPointers(),null!=f[0]&&null!=g[1]&&(f[0].set(g[1]),f[0].setIndexOver())):d=f.getValue();break;case "prc":void 0!==g[1]&&void 0!==g[2]?(f=f.getPointers(),null!=f[0]&&null!=
g[1]&&(f[0]._set(g[1]),f[0].setIndexOver()),null!=f[1]&&null!=g[2]&&(f[1]._set(g[2]),f[1].setIndexOver())):void 0!==g[1]?(f=f.getPointers(),null!=f[0]&&null!=g[1]&&(f[0]._set(g[1]),f[0].setIndexOver())):d=f.getPrcValue();break;case "calculatedValue":var h=f.getValue().split(";");d="";for(var m=0;m<h.length;m++)d+=(0<m?";":"")+f.nice(h[m]);break;case "skin":f.setSkin(g[1])}else b||e||(c(d)||(d=[]),d.push(f))}),c(d)&&1==d.length&&(d=d[0]),d||this};var g={settings:{from:1,to:10,step:1,smooth:!0,limits:!0,
round:0,format:{format:"#,##0.##"},value:"5;7",dimension:""},className:"jslider",selector:".jslider-",template:tmpl('<span class="<%=className%>"><table><tr><td><div class="<%=className%>-bg"><i class="l"></i><i class="f"></i><i class="r"></i><i class="v"></i></div><div class="<%=className%>-pointer"></div><div class="<%=className%>-pointer <%=className%>-pointer-to"></div><div class="<%=className%>-label"><span><%=settings.from%></span></div><div class="<%=className%>-label <%=className%>-label-to"><span><%=settings.to%></span><%=settings.dimension%></div><div class="<%=className%>-value"><span></span><%=settings.dimension%></div><div class="<%=className%>-value <%=className%>-value-to"><span></span><%=settings.dimension%></div><div class="<%=className%>-scale"><%=scale%></div></td></tr></table></span>')};
e.prototype.init=function(b,c){this.settings=a.extend(!0,{},g.settings,c?c:{});this.inputNode=a(b).hide();this.settings.interval=this.settings.to-this.settings.from;this.settings.value=this.inputNode.attr("value");this.settings.calculate&&a.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate);this.settings.onstatechange&&a.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange);this.is={init:!1};this.o={};this.create()};e.prototype.onstatechange=
function(){};e.prototype.create=function(){var d=this;this.domNode=a(g.template({className:g.className,settings:{from:this.nice(this.settings.from),to:this.nice(this.settings.to),dimension:this.settings.dimension},scale:this.generateScale()}));this.inputNode.after(this.domNode);this.drawScale();this.settings.skin&&0<this.settings.skin.length&&this.setSkin(this.settings.skin);this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};a.extend(this.o,{pointers:{},labels:{0:{o:this.domNode.find(g.selector+
"value").not(g.selector+"value-to")},1:{o:this.domNode.find(g.selector+"value").filter(g.selector+"value-to")}},limits:{0:this.domNode.find(g.selector+"label").not(g.selector+"label-to"),1:this.domNode.find(g.selector+"label").filter(g.selector+"label-to")}});a.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")});a.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")});d.settings.value.split(";")[1]||(this.settings.single=!0,this.domNode.addDependClass("single"));d.settings.limits||
this.domNode.addDependClass("limitless");this.domNode.find(g.selector+"pointer").each(function(a){var c=d.settings.value.split(";")[a];if(c){d.o.pointers[a]=new b(this,a,d);var e=d.settings.value.split(";")[a-1];e&&new Number(c)<new Number(e)&&(c=e);c=c<d.settings.from?d.settings.from:c;c=c>d.settings.to?d.settings.to:c;d.o.pointers[a].set(c,!0)}});this.o.value=this.domNode.find(".v");this.is.init=!0;a.each(this.o.pointers,function(a){d.redraw(this)});(function(b){a(window).resize(function(){b.onresize()})})(this)};
e.prototype.setSkin=function(a){this.skin_&&this.domNode.removeDependClass(this.skin_,"_");this.domNode.addDependClass(this.skin_=a,"_")};e.prototype.setPointersIndex=function(b){a.each(this.getPointers(),function(a){this.index(a)})};e.prototype.getPointers=function(){return this.o.pointers};e.prototype.generateScale=function(){if(this.settings.scale&&0<this.settings.scale.length){for(var a="",b=this.settings.scale,c=Math.round(100/(b.length-1)*10)/10,e=0;e<b.length;e++)a+='<span style="left: '+e*
c+'%">'+("|"!=b[e]?"<ins>"+b[e]+"</ins>":"")+"</span>";return a}return""};e.prototype.drawScale=function(){this.domNode.find(g.selector+"scale span ins").each(function(){a(this).css({marginLeft:-a(this).outerWidth()/2})})};e.prototype.onresize=function(){var b=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};a.each(this.o.pointers,function(a){b.redraw(this)})};e.prototype.update=function(){this.onresize();this.drawScale()};e.prototype.limits=function(a,b){if(!this.settings.smooth){var d=
100*this.settings.step/this.settings.interval;a=Math.round(a/d)*d}d=this.o.pointers[1-b.uid];return d&&b.uid&&a<d.value.prc&&(a=d.value.prc),d&&!b.uid&&a>d.value.prc&&(a=d.value.prc),0>a&&(a=0),100<a&&(a=100),Math.round(10*a)/10};e.prototype.redraw=function(a){if(!this.is.init)return!1;this.setValue();this.o.pointers[0]&&this.o.pointers[1]&&this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"});this.o.labels[a.uid].value.html(this.nice(a.value.origin));
this.redrawLabels(a)};e.prototype.redrawLabels=function(a){function b(a,b,c){return b.margin=-b.label/2,label_left=b.border+b.margin,0>label_left&&(b.margin-=label_left),b.border+b.label/2>d.sizes.domWidth?(b.margin=0,b.right=!0):b.right=!1,a.o.css({left:c+"%",marginLeft:b.margin,right:"auto"}),b.right&&a.o.css({left:"auto",right:0}),b}var d=this,c=this.o.labels[a.uid],e=a.value.prc,g={label:c.o.outerWidth(),right:!1,border:e*this.sizes.domWidth/100};if(!this.settings.single){var n=this.o.pointers[1-
a.uid],w=this.o.labels[n.uid];switch(a.uid){case 0:g.border+g.label/2>w.o.offset().left-this.sizes.domOffset.left?(w.o.css({visibility:"hidden"}),w.value.html(this.nice(n.value.origin)),c.o.css({visibility:"visible"}),e=(n.value.prc-e)/2+e,n.value.prc!=a.value.prc&&(c.value.html(this.nice(a.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(n.value.origin)),g.label=c.o.outerWidth(),g.border=e*this.sizes.domWidth/100)):w.o.css({visibility:"visible"});break;case 1:g.border-g.label/2<w.o.offset().left-this.sizes.domOffset.left+
w.o.outerWidth()?(w.o.css({visibility:"hidden"}),w.value.html(this.nice(n.value.origin)),c.o.css({visibility:"visible"}),e=(e-n.value.prc)/2+n.value.prc,n.value.prc!=a.value.prc&&(c.value.html(this.nice(n.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(a.value.origin)),g.label=c.o.outerWidth(),g.border=e*this.sizes.domWidth/100)):w.o.css({visibility:"visible"})}}g=b(c,g,e);w&&(g={label:w.o.outerWidth(),right:!1,border:n.value.prc*this.sizes.domWidth/100},g=b(w,g,n.value.prc));this.redrawLimits()};e.prototype.redrawLimits=
function(){if(this.settings.limits){var a=[!0,!0];for(key in this.o.pointers)if(!this.settings.single||0==key){var b=this.o.labels[this.o.pointers[key].uid],c=b.o.offset().left-this.sizes.domOffset.left,e=this.o.limits[0];c<e.outerWidth()&&(a[0]=!1);e=this.o.limits[1];c+b.o.outerWidth()>this.sizes.domWidth-e.outerWidth()&&(a[1]=!1)}for(b=0;b<a.length;b++)a[b]?this.o.limits[b].fadeIn("fast"):this.o.limits[b].fadeOut("fast")}};e.prototype.setValue=function(){var a=this.getValue();this.inputNode.attr("value",
a);this.onstatechange.call(this,a)};e.prototype.getValue=function(){if(!this.is.init)return!1;var b=this,c="";return a.each(this.o.pointers,function(a){void 0!=this.value.prc&&!isNaN(this.value.prc)&&(c+=(0<a?";":"")+b.prcToValue(this.value.prc))}),c};e.prototype.getPrcValue=function(){if(!this.is.init)return!1;var b="";return a.each(this.o.pointers,function(a){void 0!=this.value.prc&&!isNaN(this.value.prc)&&(b+=(0<a?";":"")+this.value.prc)}),b};e.prototype.prcToValue=function(a){if(this.settings.heterogeneity&&
0<this.settings.heterogeneity.length)for(var b=this.settings.heterogeneity,d=0,c=this.settings.from,e=0;e<=b.length;e++){var g=b[e]?b[e].split("/"):[100,this.settings.to];g[0]=new Number(g[0]);g[1]=new Number(g[1]);if(a>=d&&a<=g[0])var n=c+(a-d)*(g[1]-c)/(g[0]-d);d=g[0];c=g[1]}else n=this.settings.from+a*this.settings.interval/100;return this.round(n)};e.prototype.valueToPrc=function(a,b){if(this.settings.heterogeneity&&0<this.settings.heterogeneity.length)for(var d=this.settings.heterogeneity,c=
0,e=this.settings.from,g=0;g<=d.length;g++){var f=d[g]?d[g].split("/"):[100,this.settings.to];f[0]=new Number(f[0]);f[1]=new Number(f[1]);if(a>=e&&a<=f[1])var w=b.limits(c+(a-e)*(f[0]-c)/(f[1]-e));c=f[0];e=f[1]}else w=b.limits(100*(a-this.settings.from)/this.settings.interval);return w};e.prototype.round=function(a){return a=Math.round(a/this.settings.step)*this.settings.step,this.settings.round?a=Math.round(a*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):a=Math.round(a),a};e.prototype.nice=
function(b){return b=b.toString().replace(/,/gi,".").replace(/ /gi,""),a.formatNumber?a.formatNumber(new Number(b),this.settings.format||{}).replace(/-/gi,"&minus;"):new Number(b)};b.prototype=new Draggable;b.prototype.oninit=function(a,b,c){this.uid=b;this.parent=c;this.value={};this.settings=this.parent.settings};b.prototype.onmousedown=function(a){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()};this.ptr.addDependClass("hover");this.setIndexOver()};b.prototype.onmousemove=
function(a,b){a=this._getPageCoords(a);this._set(this.calc(a.x))};b.prototype.onmouseup=function(b){this.parent.settings.callback&&a.isFunction(this.parent.settings.callback)&&this.parent.settings.callback.call(this.parent,this.parent.getValue());this.ptr.removeDependClass("hover")};b.prototype.setIndexOver=function(){this.parent.setPointersIndex(1);this.index(2)};b.prototype.index=function(a){this.ptr.css({zIndex:a})};b.prototype.limits=function(a){return this.parent.limits(a,this)};b.prototype.calc=
function(a){return this.limits(100*(a-this._parent.offset.left)/this._parent.width)};b.prototype.set=function(a,b){this.value.origin=this.parent.round(a);this._set(this.parent.valueToPrc(a,this),b)};b.prototype._set=function(a,b){b||(this.value.origin=this.parent.prcToValue(a));this.value.prc=a;this.ptr.css({left:a+"%"});this.parent.redraw(this)}})(jQuery);
(function(a,c){function e(d){d=a.extend({},m,d||{});for(var c=a(this),e=0,f=c.length;e<f;e++){var h=c.eq(e),r=d;if(!h.hasClass("stepper-input")){r=a.extend({},r,h.data("stepper-options"));var l=parseFloat(h.attr("min")),q=parseFloat(h.attr("max")),p=parseFloat(h.attr("step"))||1;h.addClass("stepper-input").wrap('<div class="stepper '+r.customClass+'" />').after('<span class="stepper-arrow up">'+r.labels.up+'</span><span class="stepper-arrow down">'+r.labels.down+"</span>");var u=h.parent(".stepper");
r=a.extend({$stepper:u,$input:h,$arrow:u.find(".stepper-arrow"),min:isNaN(l)?!1:l,max:isNaN(q)?!1:q,step:isNaN(p)?1:p,timer:null,et_data:{up:{clazz:"",attr:{}},down:{clazz:"",attr:{}}}},r);r.et_data&&(l=r.et_data.up,q=r.et_data.down,u.find(".stepper-arrow.up").addClass(l.clazz).attr(l.attr),u.find(".stepper-arrow.down").addClass(q.clazz).attr(q.attr));l=String(r.step);l=-1<l.indexOf(".")?l.length-l.indexOf(".")-1:0;r.digits=l;h.is(":disabled")&&u.addClass("disabled");u.on("keypress",".stepper-input",
r,b);u.on("touchstart.stepper mousedown.stepper",".stepper-arrow",r,g);h.data("stepper",r)}}return c}function b(a){var b=a.data;if(38===a.keyCode||40===a.keyCode)a.preventDefault(),f(b,38===a.keyCode?b.step:-b.step)}function g(b){b.preventDefault();b.stopPropagation();d(b);var c=b.data;if(!c.$input.is(":disabled")&&!c.$stepper.hasClass("disabled")){var e=a(b.target).hasClass("up")?c.step:-c.step;c.timer=h(c.timer,200,function(){f(c,e,!1)});f(c,e);a("body").on("touchend.stepper mouseup.stepper",c,
d)}}function d(b){b.preventDefault();b.stopPropagation();(b=b.data.timer)&&clearInterval(b);a("body").off(".stepper")}function f(a,b){var d=parseFloat(a.$input.val());b=isNaN(d)?!1!==a.min?a.min:0:!1!==a.min&&d<a.min?a.min:b+d;var c=(b-a.min)%a.step;0!==c&&(b-=c);!1!==a.max&&b>a.max&&(b=a.max,a.$stepper.trigger("max"));!1!==a.min&&b<a.min&&(b=a.min,a.$stepper.trigger("min"));b!==d&&(c=Math.pow(10,a.digits),b=Math.round(b*c)/c,a.$input.trigger("before-step-change"),a.$input.val(b).trigger("change",
[""+b,""+d]))}function h(a,b,d){a&&clearInterval(a);return setInterval(d,b)}var m={customClass:"",labels:{up:"Up",down:"Down"}},p={defaults:function(b){m=a.extend(m,b||{});return"object"===typeof this?a(this):!0},destroy:function(){return a(this).each(function(b){if(b=a(this).data("stepper"))b.$stepper.off(".stepper").find(".stepper-arrow").remove(),b.$input.unwrap().removeClass("stepper-input")})},disable:function(){return a(this).each(function(b){if(b=a(this).data("stepper"))b.$input.attr("disabled",
"disabled"),b.$stepper.addClass("disabled")})},enable:function(){return a(this).each(function(b){if(b=a(this).data("stepper"))b.$input.attr("disabled",null),b.$stepper.removeClass("disabled")})}};a.fn.stepper=function(a){return p[a]?p[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof a&&a?this:(a&&""==a.max&&delete a.max,e.apply(this,arguments))};a.stepper=function(a){"defaults"===a&&p.defaults.apply(this,Array.prototype.slice.call(arguments,1))}})(jQuery,this);
(function(a){a.Zebra_DatePicker=function(c,e){var b={always_visible:!1,days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),days_abbr:!1,direction:0,disabled_dates:!1,enabled_dates:!1,first_day_of_week:1,format:"yyyy-MM-dd",header_navigation:["&#171;","&#187;"],inside:!0,lang_clear_date:"Clear date",months:"January February March April May June July August September October November December".split(" "),months_abbr:!1,offset:[5,-5],pair:!1,readonly_element:!0,select_other_months:!1,
show_clear_date:0,show_icon:!0,show_other_months:!0,show_select_today:"Today",show_week_number:!1,start_date:!1,strict:!1,view:"days",weekend_days:[0,6],zero_pad:!1,onChange:null,onClear:null,onSelect:null},g,d,f,h,m,p,r,n,w,z,A,v,l,q,y,u,B,T=0,D=0,V=0,L,N,Q,R,aa,O,ha,H,I,ka,W,ea,t,xa,za,E,x,na,ca,ma,la,k=this;k.settings={};var C=a(c),sa=function(c){if(!c){k.settings=a.extend({},b,e);for(var F in C.data())0===F.indexOf("zdp_")&&(F=F.replace(/^zdp\_/,""),void 0!==b[F]&&(k.settings[F]=C.data("zdp_"+
F)))}k.settings.readonly_element&&C.attr("readonly","readonly");F={days:["d","j","D"],months:["F","m","M","n","t"],years:["o","Y","y"]};var oa=!1,t=!1,pa=!1,qa=null;for(qa in F)a.each(F[qa],function(a,b){-1<k.settings.format.indexOf(b)&&("days"==qa?oa=!0:"months"==qa?t=!0:"years"==qa&&(pa=!0))});E=oa&&t&&pa?["years","months","days"]:!oa&&t&&pa?["years","months"]:oa||t||!pa?oa||!t||pa?["years","months","days"]:["months"]:["years"];-1==a.inArray(k.settings.view,E)&&(k.settings.view=E[E.length-1]);O=
[];aa=[];for(var ta=0;2>ta;ta++)F=0===ta?k.settings.disabled_dates:k.settings.enabled_dates,a.isArray(F)&&0<F.length&&a.each(F,function(){for(var b=this.split(" "),d=0;4>d;d++){b[d]||(b[d]="*");b[d]=-1<b[d].indexOf(",")?b[d].split(","):Array(b[d]);for(var c=0;c<b[d].length;c++)if(-1<b[d][c].indexOf("-")){var e=b[d][c].match(/^([0-9]+)\-([0-9]+)/);if(null!==e){for(var g=G(e[1]);g<=G(e[2]);g++)-1==a.inArray(g,b[d])&&b[d].push(g+"");b[d].splice(c,1)}}for(c=0;c<b[d].length;c++)b[d][c]=isNaN(G(b[d][c]))?
b[d][c]:G(b[d][c])}0===ta?O.push(b):aa.push(b)});F=new Date;var ra=k.settings.reference_date?k.settings.reference_date:C.data("zdp_reference_date")&&void 0!==C.data("zdp_reference_date")?C.data("zdp_reference_date"):F,K,X;I=H=void 0;l=ra.getMonth();z=F.getMonth();q=ra.getFullYear();A=F.getFullYear();y=ra.getDate();v=F.getDate();if(!0===k.settings.direction)H=ra;else if(!1===k.settings.direction)I=ra,ea=I.getMonth(),W=I.getFullYear(),ka=I.getDate();else if(!a.isArray(k.settings.direction)&&da(k.settings.direction)&&
0<G(k.settings.direction)||a.isArray(k.settings.direction)&&((K=ia(k.settings.direction[0]))||!0===k.settings.direction[0]||da(k.settings.direction[0])&&0<k.settings.direction[0])&&((X=ia(k.settings.direction[1]))||!1===k.settings.direction[1]||da(k.settings.direction[1])&&0<=k.settings.direction[1]))H=K?K:new Date(q,l,y+(a.isArray(k.settings.direction)?G(!0===k.settings.direction[0]?0:k.settings.direction[0]):G(k.settings.direction))),l=H.getMonth(),q=H.getFullYear(),y=H.getDate(),X&&+X>=+H?I=X:
!X&&!1!==k.settings.direction[1]&&a.isArray(k.settings.direction)&&(I=new Date(q,l,y+G(k.settings.direction[1]))),I&&(ea=I.getMonth(),W=I.getFullYear(),ka=I.getDate());else if(!a.isArray(k.settings.direction)&&da(k.settings.direction)&&0>G(k.settings.direction)||a.isArray(k.settings.direction)&&(!1===k.settings.direction[0]||da(k.settings.direction[0])&&0>k.settings.direction[0])&&((K=ia(k.settings.direction[1]))||da(k.settings.direction[1])&&0<=k.settings.direction[1]))I=new Date(q,l,y+(a.isArray(k.settings.direction)?
G(!1===k.settings.direction[0]?0:k.settings.direction[0]):G(k.settings.direction))),ea=I.getMonth(),W=I.getFullYear(),ka=I.getDate(),K&&+K<+I?H=K:!K&&a.isArray(k.settings.direction)&&(H=new Date(W,ea,ka-G(k.settings.direction[1]))),H&&(l=H.getMonth(),q=H.getFullYear(),y=H.getDate());else if(a.isArray(k.settings.disabled_dates)&&0<k.settings.disabled_dates.length)for(var ua in O)if("*"==O[ua][0]&&"*"==O[ua][1]&&"*"==O[ua][2]&&"*"==O[ua][3]){var va=[];a.each(aa,function(){"*"!=this[2][0]&&va.push(parseInt(this[2][0]+
("*"==this[1][0]?"12":J(this[1][0],2))+("*"==this[0][0]?"*"==this[1][0]?"31":(new Date(this[2][0],this[1][0],0)).getDate():J(this[0][0],2)),10))});va.sort();if(0<va.length){var Y=(va[0]+"").match(/([0-9]{4})([0-9]{2})([0-9]{2})/);q=parseInt(Y[1],10);l=parseInt(Y[2],10)-1;y=parseInt(Y[3],10)}break}if(M(q,l,y)){for(;M(q);)H?(q++,l=0):(q--,l=11);for(;M(q,l);)H?(l++,y=1):(l--,y=(new Date(q,l+1,0)).getDate()),11<l?(q++,l=0,y=1):0>l&&(q--,l=11,y=(new Date(q,l+1,0)).getDate());for(;M(q,l,y);)H?y++:y--,F=
new Date(q,l,y),q=F.getFullYear(),l=F.getMonth(),y=F.getDate();F=new Date(q,l,y);q=F.getFullYear();l=F.getMonth();y=F.getDate()}(K=ia(C.val()||(k.settings.start_date?k.settings.start_date:"")))&&k.settings.strict&&M(K.getFullYear(),K.getMonth(),K.getDate())&&C.val("");Aa(K);k.settings.always_visible||(c||(k.settings.show_icon?("firefox"==U.name&&C.is('input[type="text"]')&&"inline"==C.css("display")&&C.css("display","inline-block"),X=jQuery('<span class="Zebra_DatePicker_Icon_Wrapper"></span>').css({display:C.css("display"),
position:"static"==C.css("position")?"relative":C.css("position"),"float":C.css("float"),top:C.css("top"),right:C.css("right"),bottom:C.css("bottom"),left:C.css("left")}),C.wrap(X).css({position:"relative",top:"auto",right:"auto",bottom:"auto",left:"auto"}),f=jQuery('<button type="button" class="Zebra_DatePicker_Icon'+("disabled"==C.attr("disabled")?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>'),k.icon=f,x=f.add(C)):x=C,x.bind("click",function(a){a.preventDefault();C.attr("disabled")||
("none"!=d.css("display")?k.hide():k.show())}),void 0!==f&&f.insertAfter(C)),void 0!==f&&(f.attr("style",""),k.settings.inside&&f.addClass("Zebra_DatePicker_Icon_Inside")));K=K||k.settings.start_date||new Date;L=K.getDay();u=K.getMonth();B=K.getYear();T=K.getHours();D=K.getMinutes();V=K.getSeconds();ma=!1!==k.settings.show_select_today&&-1<a.inArray("days",E)&&!M(A,z,v)?k.settings.show_select_today:!1;c||(a(window).bind("resize",Ba),c='<div class="Zebra_DatePicker"><table class="dp_header"><tr><td class="dp_previous">'+
k.settings.header_navigation[0]+'</td><td class="dp_caption">&#032;</td><td class="dp_next">'+k.settings.header_navigation[1]+'</td></tr></table><table class="dp_daypicker"></table><div class="dp_timepicker"><div class="dp_timepicker_hour_block"><div class="dp_caption dp_timepicker_hour_label">'+a.i18n.prop("hour")+'</div><div class="dp_timepicker_hour"><input value="0"></div></div><div class="dp_timepicker_minute_block"><div class="dp_caption dp_timepicker_minute_label">'+a.i18n.prop("minute")+'</div><div class="dp_timepicker_minute"><input value="0"></div></div><div class="dp_timepicker_second_block"><div class="dp_caption dp_timepicker_second_label">'+
a.i18n.prop("second")+'</div><div class="dp_timepicker_second"><input value="0"></div></div><table class="dp_timepicker_done"><tbody><tr><td class="dp_timepicker_done" style="width: 100%">'+a.i18n.prop("done")+'</td></tr></tbody></table></div><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td class="dp_today"'+(!1!==k.settings.show_clear_date?' style="width:50%"':"")+">"+ma+'</td><td class="dp_clear"'+(!1!==ma?' style="width:50%"':"")+">"+k.settings.lang_clear_date+
"</td></tr></table></div>",d=a(c),k.datepicker=d,h=a("table.dp_header",d),m=a("table.dp_daypicker",d),p=a(".dp_timepicker",d),r=a("table.dp_monthpicker",d),n=a("table.dp_yearpicker",d),ca=a("table.dp_footer",d),na=a("td.dp_today",ca),w=a("td.dp_clear",ca),k.settings.always_visible?C.attr("disabled")||(k.settings.always_visible.append(d),k.show()):a("body").append(d),d.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseover",function(){a(this).addClass("dp_hover")}).delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",
"mouseout",function(){a(this).removeClass("dp_hover")}),Ea(a("td",h)),a(".dp_previous",h).bind("click",function(){a(this).hasClass("dp_blocked")||("months"==g?B--:"years"==g?B-=12:0>--u&&(u=11,B--),Z())}),a(".dp_caption",h).bind("click",function(){g="days"==g?-1<a.inArray("months",E)?"months":-1<a.inArray("years",E)?"years":"days":"months"==g?-1<a.inArray("years",E)?"years":-1<a.inArray("days",E)?"days":"months":-1<a.inArray("days",E)?"days":-1<a.inArray("months",E)?"months":"years";Z()}),a(".dp_next",
h).bind("click",function(){a(this).hasClass("dp_blocked")||("months"==g?B++:"years"==g?B+=12:12==++u&&(u=0,B++),Z())}),m.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){k.settings.select_other_months&&null!==(Y=a(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/))?fa(Y[1],Y[2]-1,Y[3],"days",a(this)):fa(B,u,G(a(this).html()),"days",a(this))}),r.delegate("td:not(.dp_disabled)","click",function(){var b=a(this).attr("class").match(/dp\_month\_([0-9]+)/);
u=G(b[1]);-1==a.inArray("days",E)?fa(B,u,1,"months",a(this)):(g="days",k.settings.always_visible&&C.val(""),Z())}),n.delegate("td:not(.dp_disabled)","click",function(){B=G(a(this).html());-1==a.inArray("months",E)?fa(B,1,1,"years",a(this)):(g="months",k.settings.always_visible&&C.val(""),Z())}),a(na).bind("click",function(b){b.preventDefault();fa(A,z,v,"days",a(".dp_current",m));k.settings.always_visible&&k.show();k.hide()}),a(w).bind("click",function(b){b.preventDefault();C.val("").trigger("change");
k.settings.always_visible?(R=Q=N=null,a("td.dp_selected",d).removeClass("dp_selected")):L=B=u=R=Q=N=null;k.hide();if(k.settings.onClear&&"function"==typeof k.settings.onClear)k.settings.onClear(C)}),k.settings.always_visible||a(document).bind({mousedown:Ca,keyup:Da}),Z())};k.destroy=function(){void 0!==k.icon&&k.icon.remove();k.datepicker.remove();a(document).unbind("keyup",Da);a(document).unbind("mousedown",Ca);a(window).unbind("resize",Ba);C.removeData("Zebra_DatePicker")};k.hide=function(){k.settings.always_visible||
(ja("hide"),d.hide())};k.show=function(){g=k.settings.view;var b=ia(C.val()||(k.settings.start_date?k.settings.start_date:""));b?(u=Q=b.getMonth(),B=R=b.getFullYear(),L=N=b.getDate(),M(R,Q,N)&&(k.settings.strict&&C.val(""),u=l,B=q)):(u=l,B=q);Z();if(k.settings.always_visible)d.show();else{b=d.outerWidth();var c=d.outerHeight(),e=(void 0!==f?f.offset().left+f.outerWidth(!0):C.offset().left+C.outerWidth(!0))+k.settings.offset[0],h=(void 0!==f?f.offset().top:C.offset().top)-c+k.settings.offset[1],m=
a(window).width(),r=a(window).height(),n=a(window).scrollTop(),p=a(window).scrollLeft();e+b>p+m&&(e=p+m-b);e<p&&(e=p);h+c>n+r&&(h=n+r-c);h<n&&(h=n);d.css({left:e,top:h});d.fadeIn("explorer"==U.name&&9>U.version?0:150,"linear");ja()}};k.update=function(b){k.original_direction&&(k.original_direction=k.direction);k.settings=a.extend(k.settings,b);sa(!0)};var ia=function(b){b=a.trim(b);if(""==b)return!1;var d=k.settings.format;if(k.settings.time){var c=k.settings.time;!0===k.settings.time&&(c="HH:mm:ss");
d+=" "+c}return Date.parseExact(b,d)||!1},Ea=function(a){"firefox"==U.name?a.css("MozUserSelect","none"):"explorer"==U.name?a.bind("selectstart",function(){return!1}):a.mousedown(function(){return!1})},ba=function(){k.settings.time&&(p.find(".dp_timepicker_hour input").slider({from:0,to:23,step:1,callback:function(a){T=a}}).slider("value",T),!1!==k.settings.show_minute&&(p.find(".dp_timepicker_minute input").slider({from:0,to:59,step:1,callback:function(a){D=a}}).slider("value",D),!1!==k.settings.show_second&&
(p.find(".dp_timepicker_second input").slider({from:0,to:59,step:1,callback:function(a){V=a}}).slider("value",V),p.find(".dp_timepicker_done").click(function(){fa(B,u)}))))},ya=function(){var b=(new Date(B,u+1,0)).getDate(),d=(new Date(B,u,1)).getDay(),c=(new Date(B,u,0)).getDate();d-=k.settings.first_day_of_week;d=0>d?7+d:d;S(k.settings.months[u]+", "+B);var e="<tr>";k.settings.show_week_number&&(e+="<th>"+k.settings.show_week_number+"</th>");for(var g=0;7>g;g++)e+="<th>"+(a.isArray(k.settings.days_abbr)&&
void 0!==k.settings.days_abbr[(k.settings.first_day_of_week+g)%7]?k.settings.days_abbr[(k.settings.first_day_of_week+g)%7]:k.settings.days[(k.settings.first_day_of_week+g)%7].substr(0,2))+"</th>";e+="</tr><tr>";for(g=0;42>g;g++){0<g&&0===g%7&&(e+="</tr><tr>");if(0===g%7&&k.settings.show_week_number){var f=new Date(B,u,g-d+1);var h=f.getFullYear();var l=f.getMonth()+1;var r=f.getDate();if(3>l){var n=h-1;var p=(n/4|0)-(n/100|0)+(n/400|0);h=p-(((n-1)/4|0)-((n-1)/100|0)+((n-1)/400|0));f=0;l=r-1+31*(l-
1)}else n=h,p=(n/4|0)-(n/100|0)+(n/400|0),h=p-(((n-1)/4|0)-((n-1)/100|0)+((n-1)/400|0)),f=h+1,l=r+((153*(l-3)+2)/5|0)+58+h;p=(n+p)%7;f=l+3-(l+p-f)%7;e+='<td class="dp_week_number">'+(0>f?53-((p-h)/5|0):f>364+h?1:(f/7|0)+1)+"</td>"}h=g-d+1;if(k.settings.select_other_months&&(g<d||h>b)){var q=new Date(B,u,h),y=q.getFullYear(),w=q.getMonth(),x=q.getDate();q=y+J(w+1,2)+J(x,2)}g<d?e+='<td class="'+(k.settings.select_other_months&&!M(y,w,x)?"dp_not_in_month_selectable date_"+q:"dp_not_in_month")+'">'+(k.settings.select_other_months||
k.settings.show_other_months?J(c-d+g+1,k.settings.zero_pad?2:0):"&nbsp;")+"</td>":h>b?e+='<td class="'+(k.settings.select_other_months&&!M(y,w,x)?"dp_not_in_month_selectable date_"+q:"dp_not_in_month")+'">'+(k.settings.select_other_months||k.settings.show_other_months?J(h-b,k.settings.zero_pad?2:0):"&nbsp;")+"</td>":(f=(k.settings.first_day_of_week+g)%7,l="",M(B,u,h)?(l=-1<a.inArray(f,k.settings.weekend_days)?"dp_weekend_disabled":l+" dp_disabled",u==z&&B==A&&v==h&&(l+=" dp_disabled_current")):(-1<
a.inArray(f,k.settings.weekend_days)&&(l="dp_weekend"),u==Q&&B==R&&N==h&&(l+=" dp_selected"),u==z&&B==A&&v==h&&(l+=" dp_current")),e+="<td"+(""!==l?' class="'+a.trim(l)+'"':"")+">"+(k.settings.zero_pad?J(h,2):h)+"</td>")}m.html(a(e+"</tr>"));k.settings.always_visible&&(t=a("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",m));m.show()},Fa=function(){S(B);for(var b="<tr>",d=0;12>d;d++){0<d&&0===d%3&&(b+="</tr><tr>");var c="dp_month_"+d;M(B,d)?c+=" dp_disabled":
!1!==Q&&Q==d?c+=" dp_selected":z==d&&A==B&&(c+=" dp_current");b+='<td class="'+a.trim(c)+'">'+(a.isArray(k.settings.months_abbr)&&void 0!==k.settings.months_abbr[d]?k.settings.months_abbr[d]:k.settings.months[d].substr(0,3))+"</td>"}r.html(a(b+"</tr>"));k.settings.always_visible&&(xa=a("td:not(.dp_disabled)",r));r.show()},wa=function(){S(B-7+" - "+(B+4));for(var b="<tr>",d=0;12>d;d++){0<d&&0===d%3&&(b+="</tr><tr>");var c="";M(B-7+d)?c+=" dp_disabled":R&&R==B-7+d?c+=" dp_selected":A==B-7+d&&(c+=" dp_current");
b+="<td"+(""!==a.trim(c)?' class="'+a.trim(c)+'"':"")+">"+(B-7+d)+"</td>"}n.html(a(b+"</tr>"));k.settings.always_visible&&(za=a("td:not(.dp_disabled)",n));n.show()},ja=function(b){if("explorer"==U.name&&6==U.version){if(!ha){var c=G(d.css("zIndex"))-1;ha=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowtransparency:"true",css:{zIndex:c,position:"absolute",top:-1E3,left:-1E3,width:d.outerWidth(),height:d.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",
display:"none"}});a("body").append(ha)}switch(b){case "hide":ha.hide();break;default:b=d.offset(),ha.css({top:b.top,left:b.left,display:"block"})}}},M=function(b,d,c){if((void 0===b||isNaN(b))&&(void 0===d||isNaN(d))&&(void 0===c||isNaN(c)))return!1;if(a.isArray(k.settings.direction)||0!==G(k.settings.direction)){var e=G(P(b,"undefined"!=typeof d?J(d,2):"","undefined"!=typeof c?J(c,2):"")),g=(e+"").length;if(8==g&&("undefined"!=typeof H&&e<G(P(q,J(l,2),J(y,2)))||"undefined"!=typeof I&&e>G(P(W,J(ea,
2),J(ka,2))))||6==g&&("undefined"!=typeof H&&e<G(P(q,J(l,2)))||"undefined"!=typeof I&&e>G(P(W,J(ea,2))))||4==g&&("undefined"!=typeof H&&e<q||"undefined"!=typeof I&&e>W))return!0}"undefined"!=typeof d&&(d+=1);var f=!1,h=!1;O&&a.each(O,function(){if(!f&&(-1<a.inArray(b,this[2])||-1<a.inArray("*",this[2]))&&("undefined"!=typeof d&&-1<a.inArray(d,this[1])||-1<a.inArray("*",this[1]))&&("undefined"!=typeof c&&-1<a.inArray(c,this[0])||-1<a.inArray("*",this[0]))){if("*"==this[3])return f=!0;var e=(new Date(b,
d-1,c)).getDay();if(-1<a.inArray(e,this[3]))return f=!0}});aa&&a.each(aa,function(){if(!h&&(-1<a.inArray(b,this[2])||-1<a.inArray("*",this[2]))&&(h=!0,"undefined"!=typeof d))if(h=!0,-1<a.inArray(d,this[1])||-1<a.inArray("*",this[1])){if("undefined"!=typeof c){h=!0;if(-1<a.inArray(c,this[0])||-1<a.inArray("*",this[0])){if("*"==this[3])return h=!0;var e=(new Date(b,d-1,c)).getDay();if(-1<a.inArray(e,this[3]))return h=!0}h=!1}}else h=!1});return aa&&h||!O||!f?!1:!0},da=function(a){return(a+"").match(/^\-?[0-9]+$/)?
!0:!1},S=function(b){a(".dp_caption",h).html(b);if(a.isArray(k.settings.direction)||0!==G(k.settings.direction)||1==E.length&&"months"==E[0]){b=B;var d=u;if("days"==g){var c=!M(0>d-1?P(b-1,"11"):P(b,J(d-1,2)));var e=!M(11<d+1?P(b+1,"00"):P(b,J(d+1,2)))}else if("months"==g){if(!H||H.getFullYear()<=b-1)c=!0;if(!I||I.getFullYear()>=b+1)e=!0}else if("years"==g){if(!H||H.getFullYear()<b-7)c=!0;if(!I||I.getFullYear()>b+4)e=!0}c?a(".dp_previous",h).removeClass("dp_blocked"):(a(".dp_previous",h).addClass("dp_blocked"),
a(".dp_previous",h).removeClass("dp_hover"));e?a(".dp_next",h).removeClass("dp_blocked"):(a(".dp_next",h).addClass("dp_blocked"),a(".dp_next",h).removeClass("dp_hover"))}},Z=function(){if(""===m.text()||"days"==g){if(""===m.text()){k.settings.always_visible||d.css("left",-1E3);d.show();ya();ba();var b=m.outerWidth(),c=m.outerHeight();r.css({width:b,height:c});n.css({width:b,height:c});h.css("width",b);p.css("width",b);ca.css("width",b);d.hide()}else ya();k.settings.time||p.hide();r.hide();n.hide()}else"months"==
g?(Fa(),m.hide(),p.hide(),n.hide()):"years"==g&&(wa(),m.hide(),p.hide(),r.hide());k.settings.onChange&&"function"==typeof k.settings.onChange&&void 0!==g&&(b="days"==g?m.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):"months"==g?r.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):n.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"),b.each(function(){if("days"==g)if(a(this).hasClass("dp_not_in_month_selectable")){var b=
a(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/);a(this).data("date",b[1]+"-"+b[2]+"-"+b[3])}else a(this).data("date",B+"-"+J(u+1,2)+"-"+J(G(a(this).text()),2));else"months"==g?(b=a(this).attr("class").match(/dp\_month\_([0-9]+)/),a(this).data("date",B+"-"+J(G(b[1])+1,2))):a(this).data("date",G(a(this).text()))}),k.settings.onChange(g,b,C));ca.show();!0===k.settings.show_clear_date||0===k.settings.show_clear_date&&""!==C.val()||k.settings.always_visible&&!1!==
k.settings.show_clear_date?(w.show(),ma?(na.css("width","50%"),w.css("width","50%")):(na.hide(),w.css("width","100%"))):(w.hide(),ma?na.show().css("width","100%"):ca.hide())},fa=function(a,b,d,c,e){var g=new Date(a,b,d||L,T,D,V);var f=k.settings.format;if(k.settings.time){var h=k.settings.time;!0===k.settings.time&&(h="HH:mm:ss");f+=" "+h}f=g.toString(f);C.val(f).trigger("change");c&&(h="days"==c?t:"months"==c?xa:za,k.settings.always_visible&&(Q=g.getMonth(),u=g.getMonth(),R=g.getFullYear(),B=g.getFullYear(),
N=g.getDate(),h.removeClass("dp_selected"),e.addClass("dp_selected"),"days"==c&&e.hasClass("dp_not_in_month_selectable")&&k.show()));k.hide();Aa(g);if(k.settings.onSelect&&"function"==typeof k.settings.onSelect)k.settings.onSelect(f,a+"-"+J(b+1,2)+"-"+J(d,2),g,C);C.focus()},P=function(){for(var a="",b=0;b<arguments.length;b++)a+=arguments[b]+"";return a},J=function(a,b){for(a+="";a.length<b;)a="0"+a;return a},G=function(a){return parseInt(a,10)},Aa=function(b){k.settings.pair&&a.each(k.settings.pair,
function(){var d=a(this);if(d.data&&d.data("Zebra_DatePicker")){var c=d.data("Zebra_DatePicker");c.update({reference_date:b,direction:0===c.settings.direction?1:c.settings.direction});c.settings.always_visible&&c.show()}else d.data("zdp_reference_date",b);d.val()&&b&&new Date(d.val())<b&&d.val("")})},Da=function(a){"block"!=d.css("display")&&27!=a.which||k.hide()},Ca=function(b){if("block"==d.css("display")){if(k.settings.show_icon&&a(b.target).get(0)===f.get(0))return!0;0===a(b.target).parents().filter(".Zebra_DatePicker").length&&
k.hide()}},Ba=function(){k.hide();void 0!==f&&(clearTimeout(la),la=setTimeout(function(){k.update()},100))},U={init:function(){this.name=this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(a){for(var b=0;b<a.length;b++){var d=a[b].string,c=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(d){if(-1!=d.indexOf(a[b].subString))return a[b].identity}else if(c)return a[b].identity}},
searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};U.init();sa()};a.fn.date=function(c){return this.each(function(){void 0!==a(this).data("Zebra_DatePicker")&&a(this).data("Zebra_DatePicker").destroy();var e=new a.Zebra_DatePicker(this,
c);a(this).data("Zebra_DatePicker",e)})}})(jQuery);
(function(a){"function"===typeof define&&define.amd?define(["../../"],a):"object"===typeof exports&&"function"===typeof require?a(require("jquery")):a(jQuery)})(function(a){function c(b,e){var d=function(){};d={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:c.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:d,onSearchComplete:d,onSearchError:d,
preserveInput:!1,containerClass:"autocomplete-suggestions scrollable",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(a,b,d){return-1!==a.value.toLowerCase().indexOf(d)},paramName:"query",transformResult:function(b){return"string"===typeof b?a.parseJSON(b):b},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};this.element=b;this.el=a(b);this.suggestions=[];this.badQueries=[];
this.selectedIndex=-1;this.currentValue=this.element.value;this.intervalId=0;this.cachedResponse={};this.onChange=this.onChangeInterval=null;this.isLocal=!1;this.noSuggestionsContainer=this.suggestionsContainer=null;this.options=a.extend({},d,e);this.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"};this.hint=null;this.hintValue="";this.selection=null;this.initialize();this.setOptions(e)}var e=function(){return{escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")},createNode:function(a){var b=document.createElement("div");b.className=a;b.style.position="absolute";b.style.display="none";return b}}}();c.utils=e;a.Autocomplete=c;c.formatResult=function(a,c){return a.value};c.prototype={killerFn:null,initialize:function(){var b=this,e="."+b.classes.suggestion,d=b.classes.selected,f=b.options;b.element.setAttribute("autocomplete","off");b.killerFn=function(d){0===a(d.target).closest("."+b.options.containerClass).length&&(b.killSuggestions(),b.disableKillerFn())};
b.noSuggestionsContainer=a('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0);b.suggestionsContainer=c.utils.createNode(f.containerClass);var h=a(b.suggestionsContainer);h.appendTo(f.appendTo);"auto"!==f.width&&h.width(f.width);h.on("mouseover.autocomplete",e,function(){b.activate(a(this).data("index"))});h.on("mouseout.autocomplete",function(){b.selectedIndex=-1;h.children("."+d).removeClass(d)});h.on("click.autocomplete",e,function(){b.select(a(this).data("index"))});
b.fixPositionCapture=function(){b.visible&&b.fixPosition()};a(window).on("resize.autocomplete",b.fixPositionCapture);b.el.on("keydown.autocomplete",function(a){b.onKeyPress(a)});b.el.on("keyup.autocomplete",function(a){b.onKeyUp(a)});b.el.on("blur.autocomplete",function(){b.onBlur()});b.el.on("focus.autocomplete",function(){b.onFocus()});b.el.on("change.autocomplete",function(a){b.onKeyUp(a)});b.el.on("input.autocomplete",function(a){b.onKeyUp(a)})},onFocus:function(){this.fixPosition();if(this.options.minChars<=
this.el.val().length)this.onValueChange()},onBlur:function(){this.enableKillerFn()},setOptions:function(b){var c=this.options;a.extend(c,b);if(this.isLocal=a.isArray(c.lookup))c.lookup=this.verifySuggestionsFormat(c.lookup);c.orientation=this.validateOrientation(c.orientation,"bottom");a(this.suggestionsContainer).css({"max-height":c.maxHeight+"px",width:c.width+"px","z-index":c.zIndex})},clearCache:function(){this.cachedResponse={};this.badQueries=[]},clear:function(){this.clearCache();this.currentValue=
"";this.suggestions=[]},disable:function(){this.disabled=!0;clearInterval(this.onChangeInterval);this.currentRequest&&this.currentRequest.abort()},enable:function(){this.disabled=!1},fixPosition:function(){var b=a(this.suggestionsContainer),c=b.parent().get(0);if(c===document.body||this.options.forceFixPosition){var d=this.options.orientation,e=b.outerHeight(),h=this.el.outerHeight(),m=this.el.offset(),p={top:m.top,left:m.left};if("auto"===d){d=a(window).height();var r=a(window).scrollTop(),n=-r+
m.top-e;d=Math.max(n,r+d-(m.top+h+e))===n?"top":"bottom"}p.top="top"===d?p.top+-e:p.top+h;c!==document.body&&(c=b.css("opacity"),this.visible||b.css("opacity",0).show(),e=b.offsetParent().offset(),p.top-=e.top,p.left-=e.left,this.visible||b.css("opacity",c).hide());"auto"===this.options.width&&(p.width=this.el.outerWidth()-2+"px");b.css(p)}},enableKillerFn:function(){a(document).on("click.autocomplete",this.killerFn)},disableKillerFn:function(){a(document).off("click.autocomplete",this.killerFn)},
killSuggestions:function(){var a=this;a.stopKillSuggestions();a.intervalId=window.setInterval(function(){a.hide();a.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var a=this.el.val().length,c=this.element.selectionStart;return"number"===typeof c?c===a:document.selection?(c=document.selection.createRange(),c.moveStart("character",-a),a===c.text.length):!0},onKeyPress:function(a){if(!this.disabled&&!this.visible&&40===a.which&&
this.currentValue)this.suggest();else if(!this.disabled&&this.visible){switch(a.which){case 27:this.el.val(this.currentValue);this.hide();break;case 39:if(this.hint&&this.options.onHint&&this.isCursorAtEnd()){this.selectHint();break}return;case 9:if(this.hint&&this.options.onHint){this.selectHint();return}if(-1===this.selectedIndex){this.hide();return}this.select(this.selectedIndex);if(!1===this.options.tabDisabled)return;break;case 13:if(-1===this.selectedIndex){this.hide();return}this.select(this.selectedIndex);
break;case 38:this.moveUp();break;case 40:this.moveDown();break;default:return}a.stopImmediatePropagation();a.preventDefault()}},onKeyUp:function(a){var b=this;if(!b.disabled){switch(a.which){case 38:case 40:return}clearInterval(b.onChangeInterval);if(b.currentValue!==b.el.val())if(b.findBestHint(),0<b.options.deferRequestBy)b.onChangeInterval=setInterval(function(){b.onValueChange()},b.options.deferRequestBy);else b.onValueChange()}},onValueChange:function(){var b=this.options,c=this.el.val(),d=
this.getQuery(c);this.selection&&this.currentValue!==d&&(this.selection=null,(b.onInvalidateSelection||a.noop).call(this.element));clearInterval(this.onChangeInterval);this.currentValue=c;this.selectedIndex=-1;if(b.triggerSelectOnValidInput&&(c=this.findSuggestionIndex(d),-1!==c)){this.select(c);return}d.length<b.minChars?this.hide():this.getSuggestions(d)},findSuggestionIndex:function(b){var c=-1,d=b.toLowerCase();a.each(this.suggestions,function(a,b){if(b.value.toLowerCase()===d)return c=a,!1});
return c},getQuery:function(b){var c=this.options.delimiter;if(!c)return b;b=b.split(c);return a.trim(b[b.length-1])},getSuggestionsLocal:function(b){var c=this.options,d=b.toLowerCase(),e=c.lookupFilter,h=parseInt(c.lookupLimit,10);c={suggestions:a.grep(c.lookup,function(a){return e(a,b,d)})};h&&c.suggestions.length>h&&(c.suggestions=c.suggestions.slice(0,h));return c},getSuggestions:function(b){var c=this,d=c.options,e=d.serviceUrl;d.params[d.paramName]=b;var h=d.ignoreParams?null:d.params;if(!1!==
d.onSearchStart.call(c.element,d.params))if(a.isFunction(d.lookup))d.lookup(b,function(a){c.suggestions=a.suggestions;c.suggest();d.onSearchComplete.call(c.element,b,a.suggestions)});else{if(c.isLocal)var m=c.getSuggestionsLocal(b);else{a.isFunction(e)&&(e=e.call(c.element,b));var p=e+"?"+a.param(h||{});m=c.cachedResponse[p]}m&&a.isArray(m.suggestions)?(c.suggestions=m.suggestions,c.suggest(),d.onSearchComplete.call(c.element,b,m.suggestions)):c.isBadQuery(b)?d.onSearchComplete.call(c.element,b,[]):
(c.currentRequest&&c.currentRequest.abort(),m={url:e,data:h,type:d.type,dataType:d.dataType},a.extend(m,d.ajaxSettings),c.currentRequest=a.ajax(m).done(function(a){c.currentRequest=null;a=d.transformResult(a);c.processResponse(a,b,p);d.onSearchComplete.call(c.element,b,a.suggestions)}).fail(function(a,e,g){d.onSearchError.call(c.element,b,a,e,g)}))}},isBadQuery:function(a){if(!this.options.preventBadQueries)return!1;for(var b=this.badQueries,d=b.length;d--;)if(0===a.indexOf(b[d]))return!0;return!1},
hide:function(){this.visible=!1;this.selectedIndex=-1;clearInterval(this.onChangeInterval);a(this.suggestionsContainer).hide();this.signalHint(null)},suggest:function(){if(0===this.suggestions.length)this.options.showNoSuggestionNotice?this.noSuggestions():this.hide();else{var b=this.options,c=b.groupBy,d=b.formatResult,e=this.getQuery(this.currentValue),h=this.classes.suggestion,m=this.classes.selected,p=a(this.suggestionsContainer),r=a(this.noSuggestionsContainer),n=b.beforeRender,w="",z;if(b.triggerSelectOnValidInput){var A=
this.findSuggestionIndex(e);if(-1!==A){this.select(A);return}}a.each(this.suggestions,function(a,b){if(c){var g=w;var f=b.data[c];z===f?f="":(z=f,f='<div class="autocomplete-group"><strong>'+z+"</strong></div>");w=g+f}w+='<div class="'+h+'" data-index="'+a+'">'+d(b,e)+"</div>"});this.adjustContainerWidth();r.detach();p.html(w);a.isFunction(n)&&n.call(this.element,p);this.fixPosition();p.show();b.autoSelectFirst&&(this.selectedIndex=0,p.scrollTop(0),p.children().first().addClass(m));this.visible=!0;
this.findBestHint()}},noSuggestions:function(){var b=a(this.suggestionsContainer),c=a(this.noSuggestionsContainer);this.adjustContainerWidth();c.detach();b.empty();b.append(c);this.fixPosition();b.show();this.visible=!0},adjustContainerWidth:function(){var b=this.options,c=a(this.suggestionsContainer);"auto"===b.width&&(b=this.el.outerWidth()-2,c.width(0<b?b:300))},findBestHint:function(){var b=this.el.val().toLowerCase(),c=null;b&&(a.each(this.suggestions,function(a,e){(a=0===e.value.toLowerCase().indexOf(b))&&
(c=e);return!a}),this.signalHint(c))},signalHint:function(b){var c="";b&&(c=this.currentValue+b.value.substr(this.currentValue.length));this.hintValue!==c&&(this.hintValue=c,this.hint=b,(this.options.onHint||a.noop)(c))},verifySuggestionsFormat:function(b){return b.length&&"string"===typeof b[0]?a.map(b,function(a){return{value:a,data:null}}):b},validateOrientation:function(b,c){b=a.trim(b||"").toLowerCase();-1===a.inArray(b,["auto","bottom","top"])&&(b=c);return b},processResponse:function(a,c,d){var b=
this.options;a.suggestions=this.verifySuggestionsFormat(a.suggestions);b.noCache||(this.cachedResponse[d]=a,b.preventBadQueries&&0===a.suggestions.length&&this.badQueries.push(c));c===this.getQuery(this.currentValue)&&(this.suggestions=a.suggestions,this.suggest())},activate:function(b){var c=this.classes.selected,d=a(this.suggestionsContainer),e=d.find("."+this.classes.suggestion);d.find("."+c).removeClass(c);this.selectedIndex=b;return-1!==this.selectedIndex&&e.length>this.selectedIndex?(b=e.get(this.selectedIndex),
a(b).addClass(c),b):null},selectHint:function(){var b=a.inArray(this.hint,this.suggestions);this.select(b)},select:function(a){this.hide();this.onSelect(a)},moveUp:function(){-1!==this.selectedIndex&&(0===this.selectedIndex?(a(this.suggestionsContainer).children().first().removeClass(this.classes.selected),this.selectedIndex=-1,this.el.val(this.currentValue),this.findBestHint()):this.adjustScroll(this.selectedIndex-1))},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+
1)},adjustScroll:function(b){var c=this.activate(b);if(c){var d=a(c).outerHeight();c=c.offsetTop;var e=a(this.suggestionsContainer).scrollTop();var h=e+this.options.maxHeight-d;c<e?a(this.suggestionsContainer).scrollTop(c):c>h&&a(this.suggestionsContainer).scrollTop(c-this.options.maxHeight+d);this.options.preserveInput||this.el.val(this.getValue(this.suggestions[b].value));this.signalHint(null)}},onSelect:function(b){var c=this.options.onSelect;b=this.suggestions[b];this.currentValue=this.getValue(b.value);
this.currentValue===this.el.val()||this.options.preserveInput||this.el.val(this.currentValue);this.signalHint(null);this.suggestions=[];this.selection=b;a.isFunction(c)&&c.call(this.element,b)},getValue:function(a){var b=this.options.delimiter;if(!b)return a;var d=this.currentValue;b=d.split(b);return 1===b.length?a:d.substr(0,d.length-b[b.length-1].length)+a},dispose:function(){this.el.off(".autocomplete").removeData("autocomplete");this.disableKillerFn();a(window).off("resize.autocomplete",this.fixPositionCapture);
a(this.suggestionsContainer).remove()}};a.fn.autocomplete=a.fn.devbridgeAutocomplete=function(b,e){return 0===arguments.length?this.first().data("autocomplete"):this.each(function(){var d=a(this),g=d.data("autocomplete");if("string"===typeof b){if(g&&"function"===typeof g[b])g[b](e)}else g&&g.dispose&&g.dispose(),g=new c(this,b),d.data("autocomplete",g)})}});$.extend(app,{global_event:$({}),widget:{}});
var site={width:$(window).width(),height:$(window).height(),registered_hooks:{},hook:{register:function(a,c){var e=site.registered_hooks[a];e||(e=site.registered_hooks[a]=[]);e.push(c)},fire:function(a,c,e){(a=site.registered_hooks[a])&&a.every(function(){c=this.apply(null,[c].concat(e))})}},fncts:{}},responsiveMenuManager={closeFunction:null,open:function(a,c){this.closeFunction&&this.closeFunction();a();this.closeFunction=c},close:function(){this.closeFunction&&this.closeFunction();this.closeFunction=
null}},renderSitePopup,renderGlobalSitePopup,renderAddToCartPopup,renderInfoChooserPopup;function collectCartData(a,c,e){if(a.find(".included-products-container[combination-flexible]").length){var b={};a.find(".included-quantity-selector").each(function(){var a=$(this),d=a.attr("pId");b[d]=a.val()});b=b?JSON.stringify(b):null}c.included=b;a.find(".param-dump").length&&$.extend(c,a.find(".param-dump").serializeObject());site.hook.fire("prepareAddCartData",c,[a,c.productId,c.quantity,e])}
function addProductInCart(){var a=$(this),c=a.config("cart"),e=a.closest(".page-content, .popup, .product-block, .add-cart-info-block");c=c.quantity;var b=a.attr("product-id");a={productId:b,quantity:c};collectCartData(e,a,!1);bm.ajax({url:app.baseUrl+"cart/add",data:a,type:"post",success:function(a){var d=$(a.html);"added"==a.status?renderAddToCartPopup(d):"redirect-to"==a.status?window.location.href=app.baseUrl+"product/"+a.url:"incomplete-info"==a.status&&renderInfoChooserPopup(b,d)}})}
function renderMessage(a,c,e,b,g){a=a?a:$("[section=body]");var d=$('<div class="message-block '+e+'">'+c+"</div>");a[g?g:"prepend"](d);d.scrollHere();setTimeout(function(){d.remove()},b||5E3)}
app.captchaUtil=function(){var a=[];return{reloadCaptcha:function(c){"simple_captcha"==c?(c=$(".simple-captcha img")[0].src,c=bm.path(c),c.query._=(new Date).getTime(),c=c.full(),$(".simple-captcha img").attr("src",c),$(".simple_captcha_input_field > input[name=captcha]").val("")):"re_captcha"==c&&a.forEach(function(a){void 0!=a&&grecaptcha.reset(a)})},bindReCaptcha:function(c,e){bm.onReady(window,"grecaptcha",{not:e,ready:function(){var b=grecaptcha.render(c.attr("id"),c.config("config"));a.push(b)}})}}}();
$(function(){function a(a,b,c){var d=c.find(".message-block");d.length||(d=$("<div class='message-block'></div>"),c.prepend(d));b?d.removeClass("error-message").addClass("info-message").html(a):d.removeClass("info-message").addClass("error-message").html(a);d.scrollHere();setTimeout(function(){d.remove()},app.config.newsletter_subscription_message_display_time)}$(".valid-verify-form").form({text_change_on_submit:!1});renderSitePopup=function(a,b){var c=a.el||$();a=$.extend({is_fixed:!0,is_always_up:!0},
a);void 0==a.animation_clazz&&(a.animation_clazz=app.config.site_popup_animation_clazz);c.find(".close-popup, .continue-shopping-btn, .close-btn").click(function(){b.close()});!b||b.is_closed?b=new POPUP(a):b.setContent(c.children());return b};renderGlobalSitePopup=function(a,b){b=$.extend({auto_close:4E4,el:a},b);site.global_single_popup=renderSitePopup(b,site.global_single_popup);return site.global_single_popup};renderInfoChooserPopup=function(a,b){app.global_event.trigger("initialize-info-chose-popup",
[a,b]);renderGlobalSitePopup(b,{clazz:"add-cart-information-popup"});var c=b.find(".included-products-container");c.length&&initializeCombination(a,c);b.find(".add-to-cart-button").click(function(){$(this).is(".disabled")||addProductInCart.call(this)})};renderAddToCartPopup=function(a){a=renderGlobalSitePopup(a,{clazz:"add-to-cart-popup",animation_clazz:app.config.add_to_cart_popup_animation_clazz,auto_close:!1}).el;bindProductQuantitySpinner(a);var b=a.find(".message-block");b.length&&setTimeout(function(){b.remove()},
5E3);a.find(".product-quantity-selector").ichange(600,function(){if(this.value){var b=a.find("[name=itemId]").val();bm.ajax({url:app.baseUrl+"cart/updateQuantity",data:{quantity:this.value,cartItemId:b},success:function(d){d.message&&renderMessage(a.find(".body"),d.message,d.status);$.each(d.cartData,function(b,d){a.find("."+b.minusCase()).text(d)});$.each(d.cartItemsData[+b],function(b,d){a.find("."+b.minusCase()).text(d)});app.global_event.trigger("update-cart")},error:function(b,c,e){renderMessage(a.find(".body"),
e.message,e.status)}})}}).numeric();app.global_event.trigger("update-cart")};bindAddToCartClickEvent=function(a){var b=$(".add-to-cart-button");null!=a&&(b=a.find(".add-to-cart-button"));b.click(function(){$(this).is(".disabled")||addProductInCart.call(this)})};bindAddToCartClickEvent();bindProductQuantitySpinner=function(a){var b=$(".product-quantity-selector.text-type");null!=a&&(b=a.find(".product-quantity-selector.text-type"));b.each(function(){var a=$(this),b=a.config("spin");b.et_data={up:{clazz:"et_cartp_increase_quantity",
attr:{"et-category":"button"}},down:{clazz:"et_cartp_decrease_quantity",attr:{"et-category":"button"}}};a.stepper(b)})};bindProductQuantitySpinner();bm.initCountryChangeHandler($(".country-selector-row select"));$(".widget-currency select").on("change",function(){var a=$(this);bm.ajax({url:app.baseUrl+"app/changeCurrency",data:{currencyId:a.val()},dataType:"json",success:function(a){location.reload()}})});$(".widget-newsletter > .newsletter.inplace, .newsletter.subscribe").form("prop","ajax",{url:app.baseUrl+
"shop/newsletterSubscription",success:function(c,b,g,d){d.find("input[type=text]").val("");a(c.message,!0,d)},error:function(c,b,g,d){a(g.message,!1,d)}});$(".newsletter.unsubscribe").form("prop","ajax",{url:app.baseUrl+"shop/newsletterUnsubscription",success:function(c,b,g,d){var e=d.find("input[name=sid]").val();d.parent();var h=$(c.html);h.find(".link.resubscribe").on("click",function(){bm.ajax({url:app.baseUrl+"shop/newsletterResubscription",data:{sid:e,immediate:!0},success:function(b){a(b.message,
!0,h)},error:function(b,c,d){a(d.message,!1,h)}})});d.replaceWith(h)},error:function(c,b,g,d){a(g.message,!1,d)}});$(".gust-oder-comment-page .oder-comment-form").form({ajax:{success:function(a,b,c,d){b=$(".gust-oder-comment-page .comment-area");a=$("<div class='comment-row customer'><span class='name'>"+$.i18n.prop(a.customerName?a.customerName:"customer")+" </span><span class='date-time-row'><span class='date-time'>"+a.date+"</span><span class='show-comment'>"+a.message+"</span></span></div>");
b.append(a);d.find("textarea").val("");b.animate({scrollTop:b[0].scrollHeight},"slow")},error:function(c,b,g,d){c=$(".gust-oder-comment-page .comment-area");a(g.message,!1,c)}}});$(".widget-newsletter > .submit-button.page-button").on("click",function(){location.href=app.baseUrl+"subscription"});initializeProductWidget();initCartWidget();initializePagination();var c=$(".server-message");c.length&&(c.scrollHere(),setTimeout(function(){c.remove()},app.config.server_message_display_time));$(".bmui-tab").tabify();
$(".product-block .product-quantity-selector.text-type").on("change spinchange",function(){$(this).parents(".price-n-cart").find(".add-to-cart-button").config("cart",{quantity:this.value})});$(this).find(".date-picker").each(function(){var a=$(this),b=a.attr("date-range-start")?a.attr("date-range-start"):!1,c=a.attr("date-range-end")?a.attr("date-range-end"):!1;b=b||c?[b,c]:a.attr("no-previous")?!0:a.attr("no-next")?!1:void 0;a.date({direction:b,show_select_today:!1,lang_clear_date:$.i18n.prop("clear")})});
$(this).find(".date-time-picker").each(function(){var a=$(this),b=a.attr("date-range-start")?a.attr("date-range-start"):!1,c=a.attr("date-range-end")?a.attr("date-range-end"):!1;b=b||c?[b,c]:a.attr("no-previous")?!0:a.attr("no-next")?!1:void 0;c="12"==a.attr("time-format")?"hh:mm:tt":"HH:mm";a.date({direction:b,show_select_today:!1,lang_clear_date:$.i18n.prop("clear"),time:c})});$(".recaptcha-container").each(function(){app.captchaUtil.bindReCaptcha($(this))})});
function initializePagination(){function a(a){var b=a.data("wcuiPagination");a=a.data("urlprefix")+"-";var c=bm.path(document.location.href);c.query[a+"offset"]=(b.currentPage-1)*b.itemsPerPage;c.query[a+"max"]=b.all?"-1":b.itemsPerPage;return c.full()}var c=$("paginator");0!=c.length&&(c.each(function(){$(this).paginator({showPages:800<window.innerWidth?app.config.number_block_in_paginator_count:app.config.number_block_in_paginator_count_800})}),$(".pagination").each(function(){$(this).obj().onPageClick=
function(){window.location.href=a($(this))}}),$(".per-page-count").change(function(){var c=$(this).siblings(".pagination");c.obj().setItemsPerPage(+this.value);window.location.href=a(c)}))}
function initializeProductWidget(){$(".product-sorting").change(function(){var a=$(this),c=a.attr("urlprefix"),e=bm.path(document.location.href);e.query[c+"-sort"]=a.val();window.location.href=e.full()});$(".scrollable-view").each(function(){var a=$(this),c=a.find(">.header");a.find(".content").scrollbar({show_vertical:!1,show_horizontal:!0,use_bar:!1,visible_on:"always",horizontal:{step:"auto",handle:{left:c.find(".scroll-left"),right:c.find(".scroll-right")}}})})}
function initCartWidget(){function a(a){a.find(".cart-wrapper.quick-cart").click(function(){var a=$(this).siblings(".quick-cart-content");a.hasClass("show")||(a.is(":hidden")?(a.stop(!0).slideDown(),a.focus().one("blur",function(){setTimeout(function(){a.stop(!0).slideUp()},200)})):a.stop(!0).slideUp())});a.find(".cart-menu-button").on("click",function(){var a=$(this),b=a.siblings(".content"),c=b.find(".quick-cart-content");b.hasClass("show")?responsiveMenuManager.close():responsiveMenuManager.open(function(){a.addClass("close");
b.addClass("show");c.css({display:""}).addClass("show")},function(){a.removeClass("close");b.removeClass("show");c.css({display:"none"}).removeClass("show")})})}$(".widget-cart").each(function(){var c=$(this);a(c);var e=c.attr("widget-id"),b=c.attr("id");app.global_event.bind("update-cart billing-address-change",function(){bm.ajax({data:{id:e},dataType:"html",url:app.baseUrl+"cart/widget",success:function(e){c.replaceWith(e);c=$("#"+b);a(c)}})})})}$(function(){bm.initCityValidator($('[name="postCode"]'))});
function updateProductPrice(a,c){var e=a.closest(".page-content, .popup, .product-block, .add-cart-info-block");e.is(".page-content")&&(e=e.find(".product-widget.widget-price, .product-widget.widget-variation, .product-widget.widget-addCart"));collectCartData(e,c,!0);bm.ajax({controller:"productPage",action:"priceAndUnavailableMsg",data:c,success:function(a){e.find(".current-price .price-amount").text(a.price.toFixed(2));a.expect?e.find(".previous-price .price-amount").text(a.expect.toFixed(2)):a.sale&&
e.find(".previous-price .price-amount").text(a.sale.toFixed(2));var b=e.find(".current-price .total-amount");if(b.length){var d=c.quantity||e.find(".add-to-cart-button").config("cart","quantity");b.text((a.price*d).toFixed(2))}e.closest(".page-content").find(".widget-variation .product-status").remove();e.closest(".page-content").find(".widget-stockMark").replaceWith(a.stockWidget).show()},error:function(a,c,d){e.closest(".page-content").find(".widget-stockMark").hide();displayUnavailableStatus(e.closest(".page-content").find(".widget-variation"),
d.message)}})}function displayUnavailableStatus(a,c){a.find(".product-status").remove();a.prepend('<span class="product-status message-block error"></span>');a.find(".product-status").text(c)}
function initializeCombination(a,c){c.is(".initialized")||(c.change(function(e){var b={productId:a};e=e.originalEvent||e;e=$(e.target||e.srcElement);var g=c.parents(".page-content, .add-cart-information-popup").find(".widget-addCart .button, .add-to-cart-button"),d=e.parents(".info-row");1>+e.val()?(g.addClass("disabled"),renderMessage(d,$.i18n.prop("minimum.required.quantity",[1]),"error","5000","after")):(g.removeClass("disabled"),d.siblings(".message-block.error").remove(),updateProductPrice(c,
b))}),c.find(".included-quantity-selector").each(function(){var a=$(this),b=a.config("spin");b.et_data={up:{clazz:"et_pdp_increase_quantity",attr:{"et-category":"button"}},down:{clazz:"et_pdp_decrease_quantity",attr:{"et-category":"button"}}};a.stepper(b)}),c.addClass("initialized"))}$.extend($.form_care_functions,{simple_captcha_reload:function(){this.find(".simple-captcha-reload.icon").click(function(){app.captchaUtil.reloadCaptcha("simple_captcha")})}});
function initializeProductInfoView(a,c,e,b){bindProductQuantitySpinner(c);c.find(".product-quantity-selector.text-type").on("change spinchange",function(){c.find(".widget-addCart .add-to-cart-button").config("cart",{quantity:this.value})});var g=$(".included-products-container");g.length&&initializeCombination(a,g);bindAddToCartClickEvent(c);if("details"==e)bm.onReady(app,"productWidgets",{ready:function(){app.productWidgets.init(c,a)},not:bm.addScript.bind(void 0,"js/site/product.js",!0)});app.global_event.trigger("after-product-info-view-initialize",
[a,c,e,b]);b&&b()}
$(function(){function a(a){a.addClass("responsive-navigation");e.hasClass("with-drawer")?e.find("left-container").html(a):(e.children().wrapAll('<div class="page-container"></div>'),a=$('<div class="left-container"></div>').html(a),e.prepend(a),setTimeout(function(){e.find(".left-container, .page-container").addClass("open")},100),e.addClass("with-drawer"))}function c(a){e.find(".left-container, .page-container").removeClass("open");setTimeout(function(){e.find(".left-container").remove();e.find(".page-container").children().unwrap();
e.removeClass("with-drawer");a&&a()},200)}var e=$("#webcommander-page");$(".widget-navigation").each(function(){var b=$(this),e=b.find(".nav-wrapper");e.find(".child-opener").on("click",function(){var a=$(this),b=a.siblings(".navigation-item-child-container");a.toggleClass("close");b.toggleClass("open")});b.find(".menu-title").on("click",function(){var d=$(this).find(".menu-button");"drawer"==d.attr("transition-type")?d.hasClass("close")?responsiveMenuManager.close():responsiveMenuManager.open(function(){d.addClass("close");
a(b.clone(!0,!0).removeAttr("id"))},function(){d.removeClass("close");c()}):e.hasClass("show")?responsiveMenuManager.close():responsiveMenuManager.open(function(){d.addClass("close");e.addClass("show responsive-navigation")},function(){d.removeClass("close");e.removeClass("show responsive-navigation")})})})});
$(function(){$(".widget-search .search-menu-button").on("click",function(){var a=$(this),c=a.siblings(".search-form");c.hasClass("show")?responsiveMenuManager.close():responsiveMenuManager.open(function(){a.addClass("close");c.addClass("show")},function(){a.removeClass("close");c.removeClass("show")})});$("#elastic-search-text").autocomplete({serviceUrl:app.baseUrl+"lookup/autoComplete",type:"GET",showNoSuggestionNotice:!0,noSuggestionNotice:"No result Found",autoSelectFirst:!0,preventBadQueries:!1,
groupBy:"category",params:{name:$("#elastic-search-text").val()}})});$(window).resize(function(){$(window).width()!=site.width&&$(window).height()!=site.height&&(responsiveMenuManager.close(),site.width=$(window).width(),site.height=$(window).height())});
function shareOnSocialMedea(a,c,e,b){switch(a){case "twitter":window.open("https://twitter.com/intent/tweet?text="+e+" "+encodeURIComponent(c),"sharertwt","toolbar=0,status=0,width=640,height=445");break;case "facebook":window.open("http://www.facebook.com/sharer.php?u="+c,"sharer","toolbar=0,status=0,width=660,height=445");break;case "linkedin":window.open("https://www.linkedin.com/shareArticle?mini=true&url="+c+"title="+e,"sharer","toolbar=0,status=0,width=660,height=445");break;case "google-plus":window.open("https://plus.google.com/share?url="+
c,"sharer","toolbar=0,status=0,width=660,height=445");break;case "pinterest":window.open("http://www.pinterest.com/pin/create/button/?media="+b+"&url="+c,"sharerpinterest","toolbar=0,status=0,width=660,height=445")}}
function tellAFriendAboutProduct(a){bm.ajax({url:app.baseUrl+"shop/tellFriend",dataType:"html",type:"post",data:{productId:a},success:function(a){var c=$(a);c.find(".tell-friend-popup").form({ajax:!0,preSubmit:function(a){$.extend(a,{success:function(a){a=$(a.html);renderGlobalSitePopup(a,{clazz:"tell-friend-success"})},error:function(a,b,e){renderMessage(c.find(".body .message-container"),e.message,"error")}})}});renderGlobalSitePopup(c,{clazz:"tell_friend_popup"})}})}
var ProductViewSwitcher=function(){function a(a){var b=this,c=a.find(".view-switchers > button");this.listingBlock=a;this.id=a.attr("id");this.displayType=a.attr("display-type");this.showOnHover=a.attr("show-on-hover");c.on("click",function(){var a=$(this);a.is(".active")||b.switchDisplayType(a.attr("value"))});(a=localStorage.getItem(this.id))&&a!=this.displayType&&c.length&&b.switchDisplayType(a)}var c=a.prototype;c._switchToList=function(){"true"==this.showOnHover&&this.listingBlock.find(".product-block").each(function(){var a=
$(this),b=a.find(".btn-add");a.find(".price-waper").after(b)})};c._switchToImage=function(){"true"==this.showOnHover&&this.listingBlock.find(".product-block").each(function(){var a=$(this),b=a.find(".btn-add");a.find(".btn-add-placeholder").after(b)})};c.switchDisplayType=function(a){this.listingBlock.removeClass(this.displayType+"-view").addClass(a+"-view");localStorage.setItem(this.id,a);this["_switchTo"+a.capitalize()]();this.listingBlock.find(".view-switchers > button.active").removeClass("active");
this.listingBlock.find(".view-switchers > button[value="+a+"]").addClass("active");this.displayType=a};return a}();$(function(){$(".product-view").each(function(){new ProductViewSwitcher($(this))})});window.fbAsyncInit=function(){FB.init({appId:app.fb_app_id,cookie:!0,xfbml:!0,version:"v2.8"})};
function googleAyncInit(){if(app.google_client_id)bm.onReady(window,"gapi",function(){gapi.load("auth2",function(){window.googleAuth2=gapi.auth2.init({client_id:app.google_client_id,cookiepolicy:"single_host_origin"})})})}function fbLogin(a){FB.login(function(c){c.authResponse?(console.log("Welcome!  Fetching your information.... "),a(c.authResponse.accessToken)):console.log("User cancelled login or did not fully authorize.")},{scope:"email,user_location",return_scopes:!0})}
function googleLogin(a){googleAuth2.signIn().then(function(c){a(c.getAuthResponse().id_token)})}function loginBySocialToken(a){bm.ajax({url:app.baseUrl+"customer/doSocialLogin",data:a,success:function(a){location.href=a.redirectUrl},error:function(a,e,b){renderMessage(null,b.message,"error")}})}
$(function(){$(".login-with-fb-btn").on("click",function(){var a=$(this).parents("form");fbLogin(function(c){loginBySocialToken({token:c,media:"fb",referer:a.find("[name=referer]").val()})})});$(".login-with-google-btn").on("click",function(){var a=$(this).parents("form");googleLogin(function(c){loginBySocialToken({token:c,media:"google",referer:a.find("[name=referer]").val()})})})});
